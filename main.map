{"version":3,"sources":["webpack:///../node_modules/css-loader/lib/css-base.js","webpack:///../node_modules/style-loader/lib/addStyles.js","webpack:///./components/primitives/button/index.js","webpack:///./services/util/imageLoader.js","webpack:///./services/imagetomesh/ImageUtil.js","webpack:///./services/util/uuid.js","webpack:///./components/primitives/slider/index.js","webpack:///./services/util/panHandler.js","webpack:///./components/puppetEditor/styles.scss?1039","webpack:///./services/util/math.js","webpack:///./services/dranimate/dranimate.js","webpack:///./components/puppetEditor/index.js","webpack:///./components/loader/index.js","webpack:///./components/zoomPanner/index.js","webpack:///./services/dranimate/util.js","webpack:///./services/imageToMesh/PuppetEditorStateService.js","webpack:///./services/puppet/PuppetFactory.js","webpack:///./_entrypoints/main.js","webpack:///./components/app/index.js","webpack:///./components/loader/styles.scss?cb16","webpack:///./components/loader/styles.scss","webpack:///../node_modules/style-loader/lib/urls.js","webpack:///./components/puppetEditor/ImageEditor.js","webpack:///./components/primitives/button/styles.scss?7171","webpack:///./components/primitives/button/styles.scss","webpack:///./components/primitives/checkbox/index.js","webpack:///./components/primitives/checkbox/styles.scss?2c32","webpack:///./components/primitives/checkbox/styles.scss","webpack:///./components/primitives/slider/styles.scss?8fb5","webpack:///./components/primitives/slider/styles.scss","webpack:///./components/zoomPanner/styles.scss?3d48","webpack:///./components/zoomPanner/styles.scss","webpack:///./services/imageToMesh/imageEditorService.js","webpack:///./services/imageToMesh/slic.js","webpack:///./components/puppetEditor/styles.scss","webpack:///./components/puppetEditor/ControlPointEditor.js","webpack:///./services/imageToMesh/ControlPointService.js","webpack:///./services/dranimate/mouseHandler.js","webpack:///./services/dranimate/leapHandler.js","webpack:///./services/dranimate/touchHandler.js","webpack:///./services/util/GifRecorder.js","webpack:///./services/imagetomesh/generateMesh.js","webpack:///./services/imagetomesh/canvasUtils.js","webpack:///./services/puppet/puppet.js","webpack:///./services/arap/arap.js","webpack:///./services/puppet/puppetRecording.js","webpack:///./components/stage/index.js","webpack:///./components/primitives/fab/index.js","webpack:///./components/primitives/fab/styles.scss?8249","webpack:///./components/primitives/fab/styles.scss","webpack:///./components/topbar/index.js","webpack:///./components/topbar/styles.scss?7ed1","webpack:///./components/topbar/styles.scss","webpack:///./components/paramControl/index.js","webpack:///./services/storage/serializer.js","webpack:///./components/paramControl/styles.scss?474f","webpack:///./components/paramControl/styles.scss","webpack:///./components/recorder/index.js","webpack:///./components/recorder/styles.scss?3dc0","webpack:///./components/recorder/styles.scss","webpack:///./components/profile/index.js","webpack:///./components/primitives/materialInput/index.js","webpack:///./components/primitives/materialInput/styles.scss?5d7f","webpack:///./components/primitives/materialInput/styles.scss","webpack:///./components/profile/styles.scss?2b4b","webpack:///./components/profile/styles.scss","webpack:///./services/util/file.js","webpack:///./services/storage/deserializer.js","webpack:///./components/stage/styles.scss?e51c","webpack:///./components/stage/styles.scss","webpack:///./styles/baseStyles.scss?21a9","webpack:///./styles/baseStyles.scss"],"names":["Button","props","button","className","onClick","children","propTypes","func","isRequired","loadImage","imageSource","Promise","resolve","reject","image","Image","onload","onerror","error","src","getImageDataFromImage","w","h","canvas","document","createElement","context","getContext","width","height","drawImage","getImageData","extractForeground","originalImageData","imageNoBackgroundData","i","data","length","putImageData","toDataURL","uuidSet","Set","generateId","Math","random","pow","generateUniqueId","id","has","add","Slider","onChange","event","target","value","onChangeEnd","min","max","defaultValue","number","PanHandler","isEnabled","needsUpdate","panPosition","x","y","panFromPosition","zoom","camera","position","clamp","sign","x1","y1","x2","y2","x3","y3","pointIsInsideTriangle","p1","p2","p3","b1","b2","b3","getDistance","sqrt","ZOOM","MIN","MAX","CAMERA_DEPTH","Dranimate","container","scene","renderer","puppets","panHandler","leapHandler","mouseHandler","touchHandler","lastUpdateTimestamp","performance","now","isInRenderLoop","isRecording","gifIsRecording","gifRecorder","getSelectedPuppet","setup","canvasContainer","halfWidth","window","innerWidth","halfHeight","innerHeight","antialias","setPixelRatio","devicePixelRatio","setClearColor","appendChild","domElement","z","gridHelper","geometry","rotateX","PI","refreshCamera","animate","onMouseWheel","d","e","wheelDelta","detail","onMouseDown","onMouseMove","onMouseUp","onTouchStart","onTouchMove","onTouchEnd","addPuppet","p","matchingIndex","findIndex","puppet","removePuppetByIndex","push","group","zoomIn","updateProjectionMatrix","zoomOut","setPanEnabled","style","cursor","deleteSelectedPuppet","selectedPuppet","index","indexOf","onRemovePuppet","cleanup","remove","splice","setRecording","isRec","startRecording","stopRecording","setGifIsRecording","console","log","render","stop","then","open","objectUrl","catch","onRenderToggle","addEventListener","left","right","top","bottom","setSize","elapsedTime","update","requestAnimationFrame","forEach","offerFrame","dranimate","STEPS","IMAGE","CONTROL_POINT","PuppetEditor","onClose","onImageEditorNext","setState","step","backgroundRemovalData","onControlPointEditorBack","onSave","controlPointPositions","alert","puppetId","isPuppet","getItem","state","imageSrc","imageElement","loaderIsVisible","scrim","puppetEditor","object","string","Loader","test","loaderDots","isVisible","showLoader","bool","ZoomPanner","onPanClick","panIsSelected","onPanSelect","panActive","pan","renderPanButton","zoomButton","onZoomSelect","getPuppetAndControlPointFromPostion","distanceThreshold","activeControlPoint","verts","threeMesh","vertices","controlPoints","closeControlPointIndex","controlPoint","mouseVector","vert","dist","distanceTo","valid","puppetIndex","hoveredOver","beingDragged","controlPointIndex","PuppetEditorStateService","item","itemIsPuppet","name","puppetEditorStateService","errorMessage","mostFaces","buildFromOptions","options","faces","imageNoBG","wireframeMaterial","color","wireframe","wireframeLinewidth","imageTexture","texturedMaterial","map","transparent","vertsFlatArray","reduce","flatArray","concat","facesFlatArray","face","vertex","f1","f2","f3","faceVertexUvs","dynamic","boundingBox","visible","box3","setFromObject","size","getSize","halfSize","multiplyScalar","translate","controlPointSpheres","sphere","centerSphere","cp","requestPuppetCreation","puppetData","getElementById","App","ImageEditor","runSlic","setTimeout","imageEditorService","doSlic","threshold","updateThresholdUi","isZoomIn","onCanvasSelectType","selector","checked","setSelectState","onEraseDrawChange","eraseDraw","onNext","imageForegroundSelection","getImageForegroundSelection","canvasElement","init","passive","editorNav","onCancel","navButton","editorCanvas","input","onContextMenu","onMouseOut","onMouseOver","onDoubleClick","editorControlParam","editorControlRow","editorControlLabel","rowSpaceAround","drawEraseLabel","Checkbox","uniqueId","checkboxInput","checkboxInputHidden","defaultChecked","checkboxLabel","SELECT_STATE","PAN","SELECT","DESELECT","MOUSE_STATE","UP","DOWN","OUTSIDE","ImageEditorService","that","mouse","mouseAbs","slic","slicSegmentsCentroids","highlightData","highlightImage","imageNoBackgroundImage","dummyCanvas","dummyContext","blankCanvas","blankContext","mouseState","selectState","imageData","img","largerSize","normWidth","normHeight","isTouch","preventDefault","rect","getBoundingClientRect","clientX","clientY","getPanPosition","round","updateHighligtedSuperpixel","redraw","addSelectionToNoBackgroundImage","removeSelectionFromNoBackgroundImage","touches","doSLICOnImage","setMouseState","regionSize","method","createImageData","result","tempNoBgData","getEncodedSLICLabel","array","offset","selectedLabel","selectedIndex","clearRect","save","scale","globalAlpha","restore","SLIC","ImageData","set","minRegionSize","maxIterations","_compute","prototype","finer","newSize","coarser","computeSLICSegmentation","rgb2xyz","rgba","xyz","Float32Array","gamma","r","g","b","xyz2lab","f","xw","yw","Yw","Xw","Zw","ix","iy","iz","labData","fx","fy","fz","computeEdge","edgeMap","k","a","c","initializeKmeansCenters","centers","clusterParams","numRegionsX","numRegionsY","imW","imH","j","v","u","centerx","centery","minEdgeValue","Infinity","xp","yp","parseInt","thisEdgeValue","parseFloat","computeCenters","segmentation","masses","numRegions","region","iMass","eliminateSmallRegions","numPixels","cleaned","Int32Array","segment","dx","Array","dy","segmentSize","label","cleanedLabel","numExpanded","pixel","neighbor","direction","floor","updateClusterParams","mcMap","msMap","mc","ms","assignSuperpixelLabel","im","distanceMap","S","cx","cy","spatial","dR","dG","dB","appearance","distance","computeResidualError","prevCenters","currentCenters","remapLabels","undefined","encodeLabels","imWidth","imHeight","newCenters","xyzData","iter","numSegments","computeEdgemap","Uint8Array","foreground","background","isBoundary","ControlPointEditor","controlPointService","getControlPoints","editorCanvasChecker","ControlPointService","foregroundImage","controlPointIndices","activeControlPointIndex","lastTouchTime","fillStyle","nearestControlPoint","filter","sort","lastTouchDelta","radius","beginPath","arc","fill","DranimateMouseHandler","rendererElement","mouseRelative","mouseAbsolute","boundingRect","updateMousePosition","getPanEnabled","setSelectionGUIVisible","find","pointInsideMesh","setSelectionState","ci","puppetCenter","getCenter","sub","getScale","setControlPointPosition","selectionState","isBeingDragged","incrementPosition","activeCp","parentNode","transformLeapCoordinate","vector","DranimateLeapHandler","controllerIsConnected","leapController","Leap","Controller","frameEventName","connect","lastFrameId","leapFrame","frame","hands","hand","thumb","fingers","distal","center","pointer","middle","ring","pinky","normalizeControlPoints","cpi","frames","normalizedFrames","setControlPointPositions","getFirstTouchLocation","firstTouch","getRelativeTouchPosition","DranimateTouchHandler","touchMap","Map","firstTouchLocation","touch","changedTouches","relativePosition","identifier","normalizedTouchPoints","Object","values","get","currentTouchIds","keys","includes","touchId","delete","GifRecorder","recordingFrequency","recorder","workers","quality","workerScript","lastRecordedFrame","addFrame","delay","copy","on","URL","createObjectURL","blob","findEdgesOfImage","contourData","alpha","isSLICBoundary","isOnImageBorder","recalculateContourPoints","contourPointsRaw","getColorAtXY","resampleDist","ax","ay","bx","by","abs","generatePuppetGeometry","contourPoints","contourPoint","rawTriangles","triangulate","triangles","centroidX","centroidY","vi","vertexIsPartOfATriangle","ti","generateMesh","puppetParams","getValueIndex","CanvasUtils","getIndexOfXY","valueIndex","newValue","Puppet","current","clone","rotation","previous","lastPosition","puppetRecording","undeformedVertices","arapMeshID","createNewARAPMesh","addControlPoint","delta","setScale","setRotation","getRotation","setRenderWireframe","shouldRender","material","normalizedControlPoints","rotateAround","setFrame","point","shouldMoveXY","shouldScale","shouldRotate","deltaRotation","xyDelta","vertexPosition","recordedFrame","absoluteControlPoints","updateMeshDeformation","deformedVerts","getDeformedVertices","controlPointSphere","verticesNeedUpdate","xUntransformed","yUntransformed","allFaces","allVerts","v1","v2","v3","ARAP","arap","REVISION","createNewMeshWrapper","Module","cwrap","setMeshVertexDataWrapper","setMeshTriangleDataWrapper","setupMeshDeformerWrapper","addControlPointWrapper","setControlPointPositionWrapper","updateMeshDeformationWrapper","getMeshVertexDataWrapper","doArrayFunction","arr","optionalArg","nDataBytes","BYTES_PER_ELEMENT","dataPtr","_malloc","dataHeap","HEAPU8","buffer","byteOffset","_free","tris","meshIndex","vertIndex","empty","numBytes","ptr","HEAPF32","TIME_DELTA","PuppetRecording","timestamp","hasRecording","controlPointFrames","relativePoints","startTime","stopTime","duration","activeIndex","lastServedIndex","relativeTime","Error","timeSinceStop","relativeTimeInLoop","closestIndex","_getNearestIndexForRelativePoint","low","high","mid","d1","d2","Stage","componentDidMount","dranimateStageContainer","closeEditor","editorIsOpen","closeProfile","profileIsOpen","openController","controllerIsOpen","onFabClick","filePicker","click","isPanSelected","onDeleteSelectedPuppet","onEditSelectedPuppet","setItem","onFileChange","onProfileClick","stage","dranimateCanvas","topBar","profileButton","paramControl","lowerLeft","fab","hiddenFilePicker","Fab","fabBar","TopBar","onInfoClick","topbar","topbarItem","aboutContainer","aboutLabel","aboutInfo","ParamControl","onSaveClick","onScaleChange","eventValue","onRotateChange","actionLabel","actionButton","renderPanel","getImageAsDataURL","getJsonFromPuppet","imageNoBGData","JSON","stringify","savePuppetToFile","puppetJsonString","Blob","type","saveAs","Recorder","onGifRecordToggle","onPuppetRecordToggle","puppetIsRecording","handleKeyPress","keyCode","keyListener","bind","removeEventListener","recorderActive","Profile","onSignIn","username","password","onUsernameChange","onPasswordChange","profileScrim","profileContents","inputField","formButton","MaterialInput","materialInput","highlight","bar","mimeTypeMap","loadFile","file","reader","FileReader","onloadend","readAsDataURL","loadDranimateFile","element","files","fileType","key","loadTextFile","readAsText","loadPuppetImageFiles","textFile","parse","all","buildPuppetFromImagesAndJson","Uint8ClampedArray","from","loadPuppetFromFile"],"mappings":";;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mCAAmC,gBAAgB;AACnD,IAAI;AACJ;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA,gBAAgB,iBAAiB;AACjC;AACA;AACA;AACA;AACA,YAAY,oBAAoB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,oDAAoD,cAAc;;AAElE;AACA;;;;;;;AC3EA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,CAAC;;AAED;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA,iBAAiB,mBAAmB;AACpC;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,iBAAiB,sBAAsB;AACvC;;AAEA;AACA,mBAAmB,2BAA2B;;AAE9C;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAgB,mBAAmB;AACnC;AACA;;AAEA;AACA;;AAEA,iBAAiB,2BAA2B;AAC5C;AACA;;AAEA,QAAQ,uBAAuB;AAC/B;AACA;AACA,GAAG;AACH;;AAEA,iBAAiB,uBAAuB;AACxC;AACA;;AAEA,2BAA2B;AAC3B;AACA;AACA;;AAEA;AACA;AACA;;AAEA,gBAAgB,iBAAiB;AACjC;AACA;AACA;AACA;AACA;AACA,cAAc;;AAEd,kDAAkD,sBAAsB;AACxE;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;;AAEA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uDAAuD;AACvD;;AAEA,6BAA6B,mBAAmB;;AAEhD;;AAEA;;AAEA;AACA;;;;;;;;;;;;;;;;;;;;;AC7WA;;AACA;;AACA;;;;;;;;;;;;;;;;;;IAEMA,M;;;;;AACJ,kBAAYC,KAAZ,EAAmB;AAAA;;AAAA,2GACXA,KADW;AAElB;;;;6BAEQ;AACP,aACE;AACC,6BAAe,gBAAOC,MAAtB,cAAgC,KAAKD,KAAL,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","file":"main.bundle.js","sourcesContent":["/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/css-loader/lib/css-base.js\n// module id = 4\n// module chunks = 0","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(selector) {\n\t\tif (typeof memo[selector] === \"undefined\") {\n\t\t\tvar styleTarget = fn.call(this, selector);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (styleTarget instanceof window.HTMLIFrameElement) {\n\t\t\t\ttry {\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t} catch(e) {\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmemo[selector] = styleTarget;\n\t\t}\n\t\treturn memo[selector]\n\t};\n})(function (target) {\n\treturn document.querySelector(target)\n});\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton && typeof options.singleton !== \"boolean\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n\tif (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else if (typeof options.insertAt === \"object\" && options.insertAt.before) {\n\t\tvar nextSibling = getElement(options.insertInto + \" \" + options.insertAt.before);\n\t\ttarget.insertBefore(style, nextSibling);\n\t} else {\n\t\tthrow new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\toptions.attrs.type = \"text/css\";\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\toptions.attrs.type = \"text/css\";\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = options.transform(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/style-loader/lib/addStyles.js\n// module id = 5\n// module chunks = 0","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './styles.scss';\n\nclass Button extends Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    return (\n      <button\n      \tclassName={ `${styles.button} ${this.props.className}` }\n      \tonClick={ this.props.onClick }>\n        { this.props.children }\n      </button>\n    );\n  }\n}\n\nButton.propTypes = {\n  onClick: PropTypes.func.isRequired\n};\n\nexport default Button;\n\n\n\n// WEBPACK FOOTER //\n// ./components/primitives/button/index.js","\nexport default function loadImage(imageSource) {\n  return new Promise((resolve, reject) => {\n    try {\n      const image = new Image();\n      image.onload = () => resolve(image);\n      image.onerror = error => reject(error);\n      image.src = imageSource;\n    }\n    catch(error) {\n      reject(error);\n    }\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./services/util/imageLoader.js","import loadImage from 'services/util/imageLoader';\n\nfunction getImageDataFromImage(image, w, h) {\n  const canvas = document.createElement('canvas');\n  const context = canvas.getContext('2d');\n  canvas.width = w || image.width;\n  canvas.height = h || image.height;\n  context.drawImage(image, 0, 0, image.width, image.height, 0, 0, canvas.width, canvas.height);\n  return context.getImageData(0, 0, canvas.width, canvas.height);\n}\n\nfunction extractForeground (originalImageData, imageNoBackgroundData) {\n  const canvas = document.createElement('canvas');\n  const context = canvas.getContext('2d');\n  canvas.width = originalImageData.width;\n  canvas.height = originalImageData.height;\n  for (let i = 0; i < imageNoBackgroundData.data.length; i += 4) {\n    if(imageNoBackgroundData.data[i + 3] !== 255) {\n      originalImageData.data[i]     = 0;\n      originalImageData.data[i + 1] = 0;\n      originalImageData.data[i + 2] = 0;\n      originalImageData.data[i + 3] = 0;\n    }\n  }\n  context.putImageData(originalImageData, 0, 0);\n  return loadImage(canvas.toDataURL('image/png'));\n}\n\nexport { extractForeground, getImageDataFromImage };\n\n\n\n// WEBPACK FOOTER //\n// ./services/imagetomesh/ImageUtil.js","const uuidSet = new Set();\n\nfunction generateId() {\n  return (Math.random() * Math.pow(2, 32 - 1) >>> 0) + '';\n}\n\nexport default function generateUniqueId() {\n  let id = generateId();\n  while (uuidSet.has(id)) {\n    id = generateId();\n  }\n  uuidSet.add(id);\n  return id;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./services/util/uuid.js","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './styles.scss';\n\nclass Slider extends Component {\n  constructor(props) {\n    super(props);\n  }\n\n  onChange = event => this.props.onChange(event.target.value);\n\n  onChangeEnd = event => {\n    if (!this.props.onChangeEnd) { return; }\n    this.props.onChangeEnd(event.target.value);\n  };\n\n  render() {\n    return (\n      <div>\n        <input\n          type='range'\n          min={ this.props.min }\n          max={ this.props.max }\n          defaultValue={ this.props.defaultValue }\n          onChange={ this.onChange }\n          onMouseUp={ this.onChangeEnd }\n          onTouchEnd={ this.onChangeEnd }\n        />\n      </div>\n    );\n  }\n}\n\nSlider.propTypes = {\n  min: PropTypes.number.isRequired,\n  max: PropTypes.number.isRequired,\n  onChange: PropTypes.func.isRequired,\n  onChangeEnd: PropTypes.func\n};\n\nexport default Slider;\n\n\n\n// WEBPACK FOOTER //\n// ./components/primitives/slider/index.js","export default class PanHandler {\n\n  constructor() {\n    this.isEnabled = false;\n    this.needsUpdate = false;\n    this.panPosition = { x: 0, y:0 };\n    this.panFromPosition = { x: 0, y: 0 };\n  }\n\n  setPanEnabled(isEnabled) {\n    this.isEnabled = isEnabled;\n  }\n\n  getPanEnabled() {\n    return this.isEnabled;\n  }\n\n  onMouseDown(x, y, zoom) {\n    if (!this.isEnabled) {\n      return;\n    }\n    this.panFromPosition.x = x / zoom;\n    this.panFromPosition.y = y / zoom;\n  }\n\n  onMouseMove(x, y, zoom) {\n    if (!this.isEnabled) {\n      return;\n    }\n    this.panPosition.x += x / zoom - this.panFromPosition.x;\n    this.panPosition.y += y / zoom - this.panFromPosition.y;\n    this.panFromPosition.x = x / zoom;\n    this.panFromPosition.y = y / zoom;\n    this.needsUpdate = true;\n  }\n\n  getPanPosition() {\n    return this.panPosition;\n  }\n\n  update(camera) {\n    if (!this.isEnabled || !this.needsUpdate) {\n      return;\n    }\n    camera.position.x = -this.panPosition.x;\n    camera.position.y = -this.panPosition.y;\n    this.needsUpdate = false;\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./services/util/panHandler.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js?modules&importLoaders=1&localIdentName=[name]__[local]___[hash:base64:5]!../../../node_modules/sass-loader/lib/loader.js!./styles.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {\"hmr\":true}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js?modules&importLoaders=1&localIdentName=[name]__[local]___[hash:base64:5]!../../../node_modules/sass-loader/lib/loader.js!./styles.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js?modules&importLoaders=1&localIdentName=[name]__[local]___[hash:base64:5]!../../../node_modules/sass-loader/lib/loader.js!./styles.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./components/puppetEditor/styles.scss\n// module id = 39\n// module chunks = 0","\nfunction clamp(value, min, max) {\n  return Math.max(min, Math.min(max, value));\n}\n\nfunction sign(x1, y1, x2, y2, x3, y3) {\n  return (x1 - x3) * (y2 - y3) - (x2 - x3) * (y1 - y3);\n}\n\n//http://stackoverflow.com/questions/2049582/how-to-determine-a-point-in-a-triangle\nfunction pointIsInsideTriangle(x, y, p1, p2, p3) {\n  const b1 = sign(x, y, p1.x, p1.y, p2.x, p2.y) < 0.0;\n  const b2 = sign(x, y, p2.x, p2.y, p3.x, p3.y) < 0.0;\n  const b3 = sign(x, y, p3.x, p3.y, p1.x, p1.y) < 0.0;\n  return ((b1 === b2) && (b2 === b3));\n}\n\nfunction getDistance(x1, y1, x2, y2) {\n  return Math.sqrt(\n    Math.pow(x1 - x2, 2) +\n    Math.pow(y1 - y2, 2)\n  );\n}\n\nexport { clamp, pointIsInsideTriangle, getDistance };\n\n\n\n// WEBPACK FOOTER //\n// ./services/util/math.js","import {\n  GridHelper,\n  OrthographicCamera,\n  Scene,\n  WebGLRenderer\n} from 'three';\nimport DranimateMouseHandler from 'services/dranimate/mouseHandler';\nimport DranimateLeapHandler from 'services/dranimate/leapHandler';\nimport DranimateTouchHandler from 'services/dranimate/touchHandler';\nimport GifRecorder from 'services/util/GifRecorder';\nimport PanHandler from 'services/util/panHandler';\nimport { clamp } from 'services/util/math';\n\nconst ZOOM = {\n  MIN: 0.1,\n  MAX: 3\n};\nconst CAMERA_DEPTH = 100;\n\nconst Dranimate = function () {\n    let container;\n    let camera, scene, renderer;\n    const puppets = [];\n\n    let zoom = 1.0;\n    const panHandler = new PanHandler();\n    let leapHandler;\n    let mouseHandler;\n    let touchHandler;\n\n    let lastUpdateTimestamp = performance.now();\n\n    let isInRenderLoop = true;\n    let isRecording = false;\n    let gifIsRecording = false;\n    let gifRecorder;\n\n    const getSelectedPuppet = () => mouseHandler.getSelectedPuppet() || touchHandler.getSelectedPuppet();\n\n/*****************************\n    API\n*****************************/\n\n    this.setup = function (canvasContainer) {\n      /* Initialize THREE canvas and scene */\n      const halfWidth = window.innerWidth / 2;\n      const halfHeight = window.innerHeight / 2;\n      // OrthographicCamera: left, right, top, bottom, near, far\n      // puppet.z = 0, controlPoint.z = 10\n      camera = new OrthographicCamera(-halfWidth, halfWidth, -halfHeight, halfHeight, CAMERA_DEPTH - 10, CAMERA_DEPTH + 1);\n      scene = new Scene();\n      renderer = new WebGLRenderer({ antialias: true });\n      renderer.setPixelRatio(window.devicePixelRatio);\n      // renderer.setSize(width, height);\n      renderer.setClearColor(0xFFFFFF, 1);\n      canvasContainer.appendChild(renderer.domElement);\n      camera.position.x = 0;\n      camera.position.y = 0;\n      camera.position.z = CAMERA_DEPTH;\n\n      mouseHandler = new DranimateMouseHandler(renderer.domElement, panHandler);\n      touchHandler = new DranimateTouchHandler(renderer.domElement, panHandler);\n      leapHandler = new DranimateLeapHandler(renderer.domElement, panHandler, puppets);\n\n      const gridHelper = new GridHelper(1000, 20);\n      gridHelper.geometry.rotateX(Math.PI / 2);\n      scene.add(gridHelper);\n\n      refreshCamera();\n      animate();\n    }\n\n    this.onMouseWheel = function(event) {\n      let d = ((typeof e.wheelDelta != \"undefined\")?(-e.wheelDelta):e.detail);\n      d *= 0.01;\n      zoom += d;\n      zoom = clamp(zoom, ZOOM.MIN, ZOOM.MAX);\n      refreshCamera();\n    };\n\n    this.onMouseDown = event => mouseHandler.onMouseDown(event, puppets, zoom);\n\n    this.onMouseMove = event => mouseHandler.onMouseMove(event, puppets, zoom);\n\n    this.onMouseUp = event => mouseHandler.onMouseUp(event, puppets, zoom);\n\n    this.onTouchStart = event => touchHandler.onTouchStart(event, puppets, zoom);\n\n    this.onTouchMove = event => touchHandler.onTouchMove(event, puppets, zoom);\n\n    this.onTouchEnd = event => touchHandler.onTouchEnd(event, puppets, zoom);\n\n    // this.createNewPuppet = function (vertices, faces, controlPoints, image, imageNoBG) {\n    //\n    //     /* Create the new Puppet */\n    //\n    //     var puppet = new Puppet(image, imageNoBG);\n    //     puppet.generateMesh(vertices, faces, controlPoints, scene);\n    //     puppets.push(puppet);\n    //\n    // }\n\n    this.addPuppet = function (p) {\n      const matchingIndex = puppets.findIndex(puppet => puppet.id === p.id);\n      if(matchingIndex > -1) {\n        this.removePuppetByIndex(matchingIndex);\n      }\n      puppets.push(p);\n      scene.add(p.group);\n    }\n\n    this.zoomIn = function () {\n        zoom += 0.1;\n        zoom = clamp(zoom, ZOOM.MIN, ZOOM.MAX);\n        //panPosition.x -= (0.1)*window.innerWidth/2;\n        //panPosition.y -= (0.1)*window.innerHeight/2;\n\n        refreshCamera();\n        camera.updateProjectionMatrix();\n    }\n\n    this.zoomOut = function () {\n        zoom -= 0.1;\n        zoom = clamp(zoom, ZOOM.MIN, ZOOM.MAX);\n        //panPosition.x += (0.1)*window.innerWidth/2;\n        //panPosition.y += (0.1)*window.innerHeight/2;\n\n        refreshCamera();\n        camera.updateProjectionMatrix();\n    }\n\n    this.setPanEnabled = function (isEnabled) {\n      panHandler.setPanEnabled(isEnabled);\n      renderer.domElement.style.cursor = isEnabled ? 'move' : 'default';\n    }\n\n    this.deleteSelectedPuppet = function () {\n      const selectedPuppet = getSelectedPuppet();\n      if (!selectedPuppet) {\n        return;\n      }\n      const index = puppets.indexOf(selectedPuppet);\n      this.removePuppetByIndex(index);\n      mouseHandler.onRemovePuppet();\n      touchHandler.onRemovePuppet();\n    }\n\n    this.removePuppetByIndex = function(index) {\n      const puppet = puppets[index];\n      if (!puppet) {\n        return;\n      }\n      puppet.cleanup();\n      scene.remove(puppet.group);\n      puppets.splice(index, 1);\n    }\n\n    this.getSelectedPuppet = () => getSelectedPuppet();\n\n    this.setRecording = function(isRec) {\n      isRecording = isRec;\n      if (getSelectedPuppet()) {\n        isRecording ?\n          getSelectedPuppet().startRecording() :\n          getSelectedPuppet().stopRecording();\n      }\n    };\n\n    this.setGifIsRecording = function(isRec) {\n      gifIsRecording = isRec;\n      isInRenderLoop = gifIsRecording;\n      if (gifIsRecording) {\n        gifRecorder = new GifRecorder();\n      }\n      else {\n        console.log('start exporting gif');\n        render();\n        gifRecorder.stop(renderer.domElement)\n          .then(objectUrl => window.open(objectUrl))\n          .catch(error => console.log('gif error', error));\n      }\n    }\n\n    this.onRenderToggle = () => {\n      isInRenderLoop = !isInRenderLoop;\n      if (isInRenderLoop) {\n        animate();\n      }\n    };\n\n    // this.startRenderLoop = () => {\n    //   isInRenderLoop = true;\n    //   this.animate();\n    // };\n    //\n    // this.stopRenderLoop = () => {\n    //   isInRenderLoop = false;\n    // };\n\n/*****************************\n    Dom events\n*****************************/\n\n    window.addEventListener('resize', $event => refreshCamera(), false );\n\n/*****************************\n    Draw/update loop\n*****************************/\n\n    function refreshCamera() {\n      const width = window.innerWidth / 2 / zoom;\n      const height = window.innerHeight / 2 / zoom\n      camera.left = -width;\n      camera.right = width;\n      camera.top = -height;\n      camera.bottom = height;\n      camera.updateProjectionMatrix();\n      renderer.setSize(window.innerWidth, window.innerHeight);\n    }\n\n    function animate() {\n      const now = performance.now();\n      const elapsedTime = now - lastUpdateTimestamp;\n      lastUpdateTimestamp = now;\n      update(elapsedTime);\n      render(elapsedTime);\n      if (isInRenderLoop) {\n        requestAnimationFrame(animate);\n      }\n    }\n\n    function update(elapsedTime) {\n      leapHandler.update(getSelectedPuppet());\n      puppets.forEach(puppet => puppet.update(elapsedTime, isRecording));\n      panHandler.update(camera);\n    }\n\n    function render(elapsedTime) {\n      renderer.render(scene, camera);\n      if (gifIsRecording) {\n        gifRecorder.offerFrame(renderer.domElement);\n      }\n    }\n\n};\n\nconst dranimate = new Dranimate();\nexport default dranimate;\n\n\n\n// WEBPACK FOOTER //\n// ./services/dranimate/dranimate.js","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Loader from 'components/loader';\nimport ImageEditor from 'components/puppetEditor/ImageEditor';\nimport ControlPointEditor from 'components/puppetEditor/ControlPointEditor';\nimport Slider from 'components/primitives/slider';\nimport dranimate from 'services/dranimate/dranimate';\nimport puppetEditorStateService from 'services/imageToMesh/PuppetEditorStateService';\nimport generateUniqueId from 'services/util/uuid';\nimport { generateMesh } from 'services/imagetomesh/generateMesh';\nimport { getImageDataFromImage } from 'services/imagetomesh/ImageUtil';\nimport loadImage from 'services/util/imageLoader';\nimport styles from './styles.scss';\n\nconst STEPS = {\n  IMAGE: 'IMAGE',\n  CONTROL_POINT: 'CONTROL_POINT'\n};\n\nclass PuppetEditor extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loaderIsVisible: false,\n      step: STEPS.IMAGE,\n      imageSrc: null,\n      backgroundRemovalData: null,\n      controlPointPositions: null,\n    };\n  }\n\n  componentWillMount() {\n    if (puppetEditorStateService.isPuppet) {\n      const puppet = puppetEditorStateService.getItem();\n      this.setState({\n        imageSrc: puppet.image.src,\n        backgroundRemovalData: puppet.backgroundRemovalData || null,\n        controlPointPositions: puppet.controlPointPositions\n      });\n    }\n    else {\n      this.setState({\n        imageSrc: puppetEditorStateService.getItem()\n      });\n    }\n  }\n\n  onClose = () => this.props.onClose();\n\n  onImageEditorNext = backgroundRemovalData => {\n    this.setState({\n      step: STEPS.CONTROL_POINT,\n      backgroundRemovalData\n    });\n  }\n\n  onControlPointEditorBack = () => {\n    this.setState({\n      step: STEPS.IMAGE\n    });\n  }\n\n  onSave = (controlPointPositions) => {\n    if (controlPointPositions.length < 2) {\n      alert('Puppet must have at least two control points');\n      return;\n    }\n    const puppetId = puppetEditorStateService.isPuppet ?\n      puppetEditorStateService.getItem().id : generateUniqueId();\n\n    loadImage(this.state.imageSrc)\n      .then((imageElement) => {\n        const { width, height} = this.state.backgroundRemovalData;\n        const originalImageData = getImageDataFromImage(imageElement, width, height);\n        return generateMesh(puppetId, imageElement, this.state.backgroundRemovalData, originalImageData, controlPointPositions);\n      })\n      .then((puppet) => {\n        if (puppet) {\n          dranimate.addPuppet(puppet);\n        }\n        this.onClose();\n      });\n  }\n\n  render() {\n    return (\n      <div className={styles.scrim}>\n        <div className={styles.puppetEditor}>\n          {\n            this.state.step === STEPS.IMAGE ?\n              <ImageEditor\n                imageSrc={this.state.imageSrc}\n                backgroundRemovalData={this.state.backgroundRemovalData}\n                onCancel={this.onClose}\n                onNext={this.onImageEditorNext}\n              /> :\n              <ControlPointEditor\n                imageSrc={this.state.imageSrc}\n                backgroundRemovalData={this.state.backgroundRemovalData}\n                controlPointPositions={this.state.controlPointPositions}\n                onClose={this.onControlPointEditorBack}\n                onSave={this.onSave}\n              />\n          }\n          <Loader isVisible={this.state.loaderIsVisible} />\n        </div>\n      </div>\n    );\n  }\n}\n\nPuppetEditor.propTypes = {\n  onClose: PropTypes.func.isRequired,\n  puppet: PropTypes.object,\n  imageSrc: PropTypes.string\n};\n\nexport default PuppetEditor;\n\n\n\n// WEBPACK FOOTER //\n// ./components/puppetEditor/index.js","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './styles.scss';\n\nclass Loader extends Component {\n  constructor(props) {\n    super(props);\n  }\n\n  showLoader() {\n    return (\n      <div className={styles.scrim}>\n        <div className={styles.test}>\n          <div>\n            <div className={styles.loaderDots} />\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  render() {\n    if (this.props.isVisible) {\n      return this.showLoader();\n    }\n    return (null);\n  }\n}\n\nLoader.propTypes = {\n  isVisible: PropTypes.bool.isRequired\n};\n\nexport default Loader;\n\n\n\n// WEBPACK FOOTER //\n// ./components/loader/index.js","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Button from 'components/primitives/button';\nimport styles from './styles.scss';\n\nclass ZoomPanner extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      panIsSelected: false,\n    };\n  }\n\n  onPanClick = () => {\n    const panIsSelected = !this.state.panIsSelected;\n    this.props.onPanSelect(panIsSelected);\n    this.setState({ panIsSelected });\n  }\n\n  renderPanButton() {\n    return (\n      <Button\n        className={this.state.panIsSelected ? styles.panActive : styles.pan}\n        onClick={this.onPanClick}\n      >\n        Pan\n      </Button>\n    );\n  }\n\n  render() {\n    return (\n      <div className={this.props.className}>\n        { this.props.onPanSelect ? this.renderPanButton() : null }\n        <Button\n          className={ styles.zoomButton }\n          onClick={() => this.props.onZoomSelect(true)}\n        >\n          Zoom In\n        </Button>\n        <Button\n          className={ styles.zoomButton }\n          onClick={() => this.props.onZoomSelect(false)}\n        >\n          Zoom Out\n        </Button>\n      </div>\n    );\n  }\n}\n\nZoomPanner.propTypes = {\n  onPanSelect: PropTypes.func,\n  onZoomSelect: PropTypes.func.isRequired,\n};\n\nexport default ZoomPanner;\n\n\n\n// WEBPACK FOOTER //\n// ./components/zoomPanner/index.js","import { Vector2, Vector3 } from 'three';\n\nfunction getPuppetAndControlPointFromPostion(puppets, x, y, distanceThreshold, zoom) {\n  let activeControlPoint;\n  for(var p = 0; p < puppets.length; p++) { // WHY LOOP OVER ALL PUPPETS?\n    const puppet = puppets[p];\n    const verts = puppet.threeMesh.geometry.vertices;\n    const controlPoints = puppet.controlPoints;\n\n    const closeControlPointIndex = controlPoints.findIndex((controlPoint, index) => {\n      const mouseVector = new Vector2(x, y)\n        // .multiplyScalar(1 / puppet.getScale())\n        // .rotateAround(puppet.getCenter(), -puppet.getRotation());\n      // const mouseVector = new Vector2(x / puppet.getScale(), y / puppet.getScale());\n      // mouseVector.rotateAround(puppet.getCenter(), -puppet.getRotation());\n      const vert = verts[controlPoint];\n      const dist = vert.distanceTo(new Vector3(mouseVector.x, mouseVector.y, 0)); //TODO: vector2?\n      return (dist < distanceThreshold * zoom);\n    });\n\n    if (closeControlPointIndex > -1) {\n      activeControlPoint = {\n        valid: true,\n        puppetIndex: p,\n        hoveredOver: true,\n        beingDragged: false,\n        controlPointIndex: closeControlPointIndex\n      };\n    }\n\n  }\n  return activeControlPoint;\n};\n\nexport { getPuppetAndControlPointFromPostion };\n\n\n\n// WEBPACK FOOTER //\n// ./services/dranimate/util.js","class PuppetEditorStateService {\n  constructor() {\n    this.isPuppet = false;\n    this.item;\n  }\n  setItem(item) {\n    const itemIsPuppet = item && item.name;\n    this.item = item;\n    this.isPuppet = itemIsPuppet;\n  }\n  getItem() {\n    return this.item;\n  }\n}\n\nconst puppetEditorStateService = new PuppetEditorStateService();\nexport default puppetEditorStateService;\n\n\n\n// WEBPACK FOOTER //\n// ./services/imageToMesh/PuppetEditorStateService.js","import {\n  Box3,\n  BoxHelper,\n  Color,\n  Face3,\n  Geometry,\n  Group,\n  Mesh,\n  MeshBasicMaterial,\n  Object3D,\n  SphereGeometry,\n  Texture,\n  Vector2,\n  Vector3\n} from 'three';\nimport Puppet from 'services/puppet/puppet';\nimport generateUniqueId from 'services/util/uuid';\n\n// Temporary guard against this nasty guy: https://github.com/cmuartfab/dranimate-browser_archive/issues/1\nconst errorMessage = 'Must load largest puppet first.'\nlet mostFaces = 0;\n\n//------- LOGIC FOR BUILDING PUPPETS, THIS IS TO KEEP CONSTRUCTION OUTSIDE OF PUPPET ENTITY ------//\nfunction buildFromOptions(options) {\n  const image = options.image;\n  const id = options.id || generateUniqueId();\n  const verts = options.vertices;\n  const faces = options.faces;\n  const controlPoints = options.controlPoints;\n  const imageNoBG = options.imageNoBG;\n\n  /* Generate wireframe material */\n  const wireframeMaterial = new MeshBasicMaterial({\n    color: 0xFF0000,\n    wireframe: true,\n    wireframeLinewidth: 1\n  });\n\n  /* Generate image material */\n  const canvas = document.createElement('canvas');\n  canvas.width  = imageNoBG.width;\n  canvas.height = imageNoBG.height;\n  const context = canvas.getContext('2d');\n  // canvas.getContext('2d');\n  context.drawImage(imageNoBG, 0, 0, imageNoBG.width, imageNoBG.height, 0, 0, canvas.width, canvas.height);\n\n  const geometry = new Geometry();\n  const imageTexture = new Texture(canvas);\n  imageTexture.needsUpdate = true;\n  const texturedMaterial = new MeshBasicMaterial({\n    map: imageTexture,\n    transparent: true\n  });\n\n  const vertsFlatArray = verts.reduce((flatArray, vert) => flatArray.concat(vert[0], vert[1]), []);\n  const facesFlatArray = faces.map(face => face);\n\n  // add geometry vertices\n  verts.map((vertex) => new Vector3(vertex[0], vertex[1], 0))\n    .forEach(vertex => geometry.vertices.push(vertex));\n\n\n  for(var i = 0; i < facesFlatArray.length; i+=3) {\n    const f1 = facesFlatArray[i];\n    const f2 = facesFlatArray[i + 1];\n    const f3 = facesFlatArray[i + 2];\n    geometry.faces.push(new Face3(f1, f2, f3 ));\n    geometry.faceVertexUvs[0].push( [\n      new Vector2(geometry.vertices[f1].x / imageNoBG.width, 1 - geometry.vertices[f1].y / imageNoBG.height),\n      new Vector2(geometry.vertices[f2].x / imageNoBG.width, 1 - geometry.vertices[f2].y / imageNoBG.height),\n      new Vector2(geometry.vertices[f3].x / imageNoBG.width, 1 - geometry.vertices[f3].y / imageNoBG.height)\n    ]);\n  }\n\n  geometry.dynamic = true;\n  // geometry.translate(-200, -200, 0);\n\n  /* Expand mesh to show finer edges of image (as opposed to rough triangle edges of mesh) */\n  console.log(\"TODO: expand mesh\")\n\n  const threeMesh = new Mesh(geometry, texturedMaterial);\n\n  const boundingBox = new BoxHelper(threeMesh, new Color(0xFF9900));\n  boundingBox.visible = false;\n\n  const box3 = new Box3();\n  box3.setFromObject(boundingBox);\n  const size = box3.getSize(new Vector3());\n  const halfSize = new Vector2(size.x, size.y).multiplyScalar(0.5);\n  geometry.translate(-halfSize.x, -halfSize.y, 0);\n\n  const controlPointSpheres = controlPoints.map(() => {\n    const sphere = new Mesh(\n      new SphereGeometry(15, 32, 32),\n      new MeshBasicMaterial({ color: 0xFFAB40 })\n    );\n    sphere.position.z = 10;\n    return sphere;\n  });\n\n  // FOR TESTING THE CENTER OF THE PUPPET:\n  const centerSphere = new Mesh(\n    new SphereGeometry(15, 32, 32),\n    new MeshBasicMaterial({ color: 0x3300FF })\n  );\n  centerSphere.position.z = 20;\n\n  const group = new Group();\n  group.add(threeMesh);\n  group.add(boundingBox);\n  // group.add(centerSphere);\n  controlPointSpheres.forEach(cp => group.add(cp));\n\n  return {\n    image,\n    id,\n    wireframeMaterial,\n    texturedMaterial,\n    verts,\n    faces,\n    controlPoints,\n    vertsFlatArray,\n    facesFlatArray,\n    threeMesh,\n    boundingBox,\n    controlPointSpheres,\n    group,\n    halfSize,\n    centerSphere\n  };\n}\n\nexport default function requestPuppetCreation(options) {\n  console.log('requestPuppetCreation', options);\n  if (!mostFaces) {\n    mostFaces = options.faces.length;\n  }\n  if (options.faces.length > mostFaces) {\n    alert(errorMessage);\n    return false;\n  }\n\n  const puppetData = {\n    imageNoBG: options.imageNoBG,\n    controlPointPositions: options.controlPointPositions,\n    backgroundRemovalData: options.backgroundRemovalData,\n    ...buildFromOptions(options)\n  };\n  return new Puppet(puppetData);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./services/puppet/PuppetFactory.js","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from '../components/app';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n\n\n// WEBPACK FOOTER //\n// ./_entrypoints/main.js","import React, { Component } from 'react';\nimport {\n  BrowserRouter as Router,\n  Route,\n} from 'react-router-dom';\nimport PuppetEditor from 'components/puppetEditor';\nimport Stage from 'components/stage';\nimport baseStyles from 'styles/baseStyles.scss';\n\nclass App extends Component {\n  render() {\n    return (\n      <Router>\n        <div>\n          <Route component={Stage} />\n        </div>\n      </Router>\n    );\n  }\n}\n\nexport default App;\n\n\n\n// WEBPACK FOOTER //\n// ./components/app/index.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js?modules&importLoaders=1&localIdentName=[name]__[local]___[hash:base64:5]!../../../node_modules/sass-loader/lib/loader.js!./styles.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {\"hmr\":true}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js?modules&importLoaders=1&localIdentName=[name]__[local]___[hash:base64:5]!../../../node_modules/sass-loader/lib/loader.js!./styles.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js?modules&importLoaders=1&localIdentName=[name]__[local]___[hash:base64:5]!../../../node_modules/sass-loader/lib/loader.js!./styles.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./components/loader/styles.scss\n// module id = 133\n// module chunks = 0","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".styles__scrim___EZv2c {\\n  width: 100%;\\n  height: 100%;\\n  left: 0;\\n  top: 0;\\n  position: absolute;\\n  background-color: rgba(0, 0, 0, 0.25);\\n  display: flex;\\n  justify-content: space-around;\\n  align-items: center; }\\n\\n.styles__test___2YuTC {\\n  background-color: #616161;\\n  width: 150px;\\n  height: 45px;\\n  border-radius: 4px;\\n  padding-top: 15px; }\\n\\n.styles__loaderDots___2DvOM,\\n.styles__loaderDots___2DvOM:before,\\n.styles__loaderDots___2DvOM:after {\\n  border-radius: 50%;\\n  width: 25px;\\n  height: 25px;\\n  animation-fill-mode: both;\\n  animation: styles__loaderkeyframes___344QQ 1.8s infinite ease-in-out; }\\n\\n.styles__loaderDots___2DvOM {\\n  color: #FFF;\\n  margin: -25px auto 25px auto;\\n  transform: translateZ(0);\\n  animation-delay: -0.16s; }\\n\\n.styles__loaderDots___2DvOM:before,\\n.styles__loaderDots___2DvOM:after {\\n  content: '';\\n  position: absolute;\\n  top: 0; }\\n\\n.styles__loaderDots___2DvOM:before {\\n  left: -35px;\\n  animation-delay: -0.32s; }\\n\\n.styles__loaderDots___2DvOM:after {\\n  left: 35px; }\\n\\n@keyframes styles__loaderkeyframes___344QQ {\\n  0%,\\n  80%,\\n  100% {\\n    box-shadow: 0 25px 0 -12.5px; }\\n  40% {\\n    box-shadow: 0 25px 0 0; } }\\n\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"scrim\": \"styles__scrim___EZv2c\",\n\t\"test\": \"styles__test___2YuTC\",\n\t\"loaderDots\": \"styles__loaderDots___2DvOM\",\n\t\"loaderkeyframes\": \"styles__loaderkeyframes___344QQ\"\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/css-loader?modules&importLoaders=1&localIdentName=[name]__[local]___[hash:base64:5]!../node_modules/sass-loader/lib/loader.js!./components/loader/styles.scss\n// module id = 134\n// module chunks = 0","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/style-loader/lib/urls.js\n// module id = 135\n// module chunks = 0","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Button from 'components/primitives/button';\nimport Checkbox from 'components/primitives/checkbox';\nimport Loader from 'components/loader';\nimport Slider from 'components/primitives/slider';\nimport ZoomPanner from 'components/zoomPanner';\nimport ImageEditorService from 'services/imageToMesh/imageEditorService';\nimport styles from './styles.scss';\n\n\nclass ImageEditor extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      eraseDraw: true,\n      selector: 'SELECT',\n      threshold: 30,\n      loaderIsVisible: false,\n      step: 0\n    };\n  }\n\n  componentWillMount() {\n    this.imageEditorService = new ImageEditorService();\n  }\n\n  componentDidMount() {\n    this.canvasElement.width = 400;\n    this.canvasElement.height = 300;\n\n    this.imageEditorService.init(this.canvasElement, this.props.imageSrc, this.props.backgroundRemovalData)\n      .then(() => this.runSlic())\n      .catch(error => console.log('error', error));\n\n    // passive touch event listeners seem to be needed, which react does not support\n    this.canvasElement.addEventListener(\n      'touchmove',\n      event => this.imageEditorService.onTouchMove(event),\n      { passive: false }\n    );\n  }\n\n  runSlic = () => {\n    console.log('.......runslic')\n    this.setState({ loaderIsVisible: true });\n    setTimeout(() => {\n      this.imageEditorService.doSlic(this.state.threshold);\n      this.setState({ loaderIsVisible: false });\n    });\n  };\n\n  updateThresholdUi = threshold => this.setState({ threshold });\n\n  onZoomSelect = isZoomIn => isZoomIn ?\n    this.imageEditorService.zoomIn() : this.imageEditorService.zoomOut();\n\n  onCanvasSelectType = event => {\n    const selector = event.target.checked ? 'SELECT' : 'DESELECT';\n    this.imageEditorService.setSelectState(selector);\n    this.setState({ selector });\n  }\n\n  onEraseDrawChange = eraseDraw => {\n    const selector = eraseDraw ? 'SELECT' : 'DESELECT';\n    this.setState({ eraseDraw });\n    this.imageEditorService.setSelectState(selector);\n  };\n\n  onNext = () => {\n    const imageForegroundSelection = this.imageEditorService.getImageForegroundSelection();\n    this.props.onNext(imageForegroundSelection);\n  };\n\n  render() {\n    return (\n      <div>\n\n        <div className={styles.editorNav}>\n          <Button\n            onClick={this.props.onCancel}\n            className={ styles.navButton }\n          >\n            Cancel\n          </Button>\n          <Button\n            onClick={this.onNext}\n            className={ styles.navButton }\n          >\n            Next\n          </Button>\n        </div>\n\n        <div>\n          <canvas\n            className={styles.editorCanvas}\n            ref={input => this.canvasElement = input}\n            onMouseMove={this.imageEditorService.onMouseMove}\n            onMouseDown={this.imageEditorService.onMouseDown}\n            onContextMenu={this.imageEditorService.onContextMenu}\n            onMouseUp={this.imageEditorService.onMouseUp}\n            onMouseOut={this.imageEditorService.onMouseOut}\n            onMouseOver={this.imageEditorService.onMouseOver}\n            onTouchStart={this.imageEditorService.onTouchStart}\n            onTouchEnd={this.imageEditorService.onTouchEnd}\n            onDoubleClick={this.imageEditorService.onDoubleClick}\n          />\n          <ZoomPanner\n            onZoomSelect={this.onZoomSelect}\n            />\n        </div>\n\n        <div className={styles.editorControlParam}>\n          <div className={styles.editorControlRow}>\n\n            <div className={styles.editorControlLabel}>\n              <p>2</p>\n            </div>\n            <p>Select Image</p>\n\n            <div className={`${styles.editorControlRow} ${styles.rowSpaceAround}`}>\n\n              <div>\n                <Checkbox\n                  defaultChecked={ this.state.eraseDraw }\n                  onChange={ this.onEraseDrawChange }\n                />\n                <p className={styles.drawEraseLabel}>\n                  { this.state.eraseDraw ? 'Draw' : 'Erase'}\n                </p>\n              </div>\n\n              <div>\n                <label htmlFor='thresholdSlider'>Selection Threshold</label>\n                <Slider\n                  min={ 20 }\n                  max={ 75 }\n                  defaultValue={ this.state.threshold }\n                  onChange={ this.updateThresholdUi }\n                  onChangeEnd={ this.runSlic }\n                />\n                <span>{this.state.threshold}</span>\n              </div>\n\n            </div>\n          </div>\n        </div>\n\n      </div>\n    );\n  }\n}\n\nImageEditor.propTypes = {\n  onCancel: PropTypes.func.isRequired,\n  onNext: PropTypes.func.isRequired,\n  imageSrc: PropTypes.string.isRequired,\n  backgroundRemovalData: PropTypes.object\n};\n\nexport default ImageEditor;\n\n\n\n// WEBPACK FOOTER //\n// ./components/puppetEditor/ImageEditor.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/index.js?modules&importLoaders=1&localIdentName=[name]__[local]___[hash:base64:5]!../../../../node_modules/sass-loader/lib/loader.js!./styles.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {\"hmr\":true}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/index.js?modules&importLoaders=1&localIdentName=[name]__[local]___[hash:base64:5]!../../../../node_modules/sass-loader/lib/loader.js!./styles.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/index.js?modules&importLoaders=1&localIdentName=[name]__[local]___[hash:base64:5]!../../../../node_modules/sass-loader/lib/loader.js!./styles.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./components/primitives/button/styles.scss\n// module id = 137\n// module chunks = 0","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".styles__button___2gotw {\\n  color: #616161;\\n  background-color: #EEE;\\n  border: 1px solid #AD0034;\\n  border-radius: 4px; }\\n\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"button\": \"styles__button___2gotw\"\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/css-loader?modules&importLoaders=1&localIdentName=[name]__[local]___[hash:base64:5]!../node_modules/sass-loader/lib/loader.js!./components/primitives/button/styles.scss\n// module id = 138\n// module chunks = 0","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport generateUniqueId from 'services/util/uuid';\nimport styles from './styles.scss';\n\nclass Checkbox extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      uniqueId: generateUniqueId()\n    };\n  }\n\n  onChange = event => this.props.onChange(event.target.checked);\n\n  render() {\n    return (\n      <div>\n        <input\n        \tclassName={ `${styles.checkboxInput} ${styles.checkboxInputHidden}` }\n        \ttype=\"checkbox\"\n          defaultChecked={ this.props.defaultChecked }\n          id={ this.state.uniqueId }\n          onChange={ this.onChange }\n        />\n        <label\n          htmlFor={ this.state.uniqueId }\n          className={ styles.checkboxLabel }\n        />\n      </div>\n    );\n  }\n}\n\nCheckbox.propTypes = {\n  defaultChecked: PropTypes.bool,\n  onChange: PropTypes.func.isRequired\n};\n\nexport default Checkbox;\n\n\n\n// WEBPACK FOOTER //\n// ./components/primitives/checkbox/index.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/index.js?modules&importLoaders=1&localIdentName=[name]__[local]___[hash:base64:5]!../../../../node_modules/sass-loader/lib/loader.js!./styles.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {\"hmr\":true}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/index.js?modules&importLoaders=1&localIdentName=[name]__[local]___[hash:base64:5]!../../../../node_modules/sass-loader/lib/loader.js!./styles.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/index.js?modules&importLoaders=1&localIdentName=[name]__[local]___[hash:base64:5]!../../../../node_modules/sass-loader/lib/loader.js!./styles.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./components/primitives/checkbox/styles.scss\n// module id = 140\n// module chunks = 0","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".styles__checkboxLabel___3MQ_D {\\n  position: relative;\\n  display: block;\\n  height: 16px;\\n  width: 32px;\\n  background-color: #D8D8D8;\\n  border-radius: 8px;\\n  cursor: pointer;\\n  transition: background-color 0.2s ease; }\\n\\n.styles__checkboxInput___1bFSD:checked ~ label {\\n  background-color: #FF87AA; }\\n\\n.styles__checkboxLabel___3MQ_D:after {\\n  position: absolute;\\n  left: 0;\\n  top: -2px;\\n  display: block;\\n  width: 20px;\\n  height: 20px;\\n  border-radius: 50%;\\n  background-color: #EEE;\\n  content: '';\\n  transition: left 0.2s ease; }\\n\\n.styles__checkboxInput___1bFSD:checked ~ label:after {\\n  left: 12px;\\n  background-color: #AD0034; }\\n\\n.styles__checkboxInputHidden___PAvSF {\\n  display: none; }\\n\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"checkboxLabel\": \"styles__checkboxLabel___3MQ_D\",\n\t\"checkboxInput\": \"styles__checkboxInput___1bFSD\",\n\t\"checkboxInputHidden\": \"styles__checkboxInputHidden___PAvSF\"\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/css-loader?modules&importLoaders=1&localIdentName=[name]__[local]___[hash:base64:5]!../node_modules/sass-loader/lib/loader.js!./components/primitives/checkbox/styles.scss\n// module id = 141\n// module chunks = 0","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/index.js?modules&importLoaders=1&localIdentName=[name]__[local]___[hash:base64:5]!../../../../node_modules/sass-loader/lib/loader.js!./styles.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {\"hmr\":true}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/index.js?modules&importLoaders=1&localIdentName=[name]__[local]___[hash:base64:5]!../../../../node_modules/sass-loader/lib/loader.js!./styles.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/index.js?modules&importLoaders=1&localIdentName=[name]__[local]___[hash:base64:5]!../../../../node_modules/sass-loader/lib/loader.js!./styles.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./components/primitives/slider/styles.scss\n// module id = 142\n// module chunks = 0","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"[type='range'] {\\n  -webkit-appearance: none;\\n  margin: 12px 0;\\n  width: 100%; }\\n  [type='range']:focus {\\n    outline: 0; }\\n    [type='range']:focus::-webkit-slider-runnable-track {\\n      background: #6e6e6e; }\\n    [type='range']:focus::-ms-fill-lower {\\n      background: #616161; }\\n    [type='range']:focus::-ms-fill-upper {\\n      background: #6e6e6e; }\\n  [type='range']::-webkit-slider-runnable-track {\\n    cursor: pointer;\\n    height: 2px;\\n    width: 100%;\\n    background: #616161;\\n    border-radius: 5px; }\\n  [type='range']::-webkit-slider-thumb {\\n    background: #AD0034;\\n    border: 2px solid #FF87AA;\\n    border-radius: 12px;\\n    cursor: pointer;\\n    height: 24px;\\n    width: 24px;\\n    -webkit-appearance: none;\\n    margin-top: -11px; }\\n  [type='range']::-moz-range-track {\\n    cursor: pointer;\\n    height: 2px;\\n    width: 100%;\\n    background: #616161;\\n    border-radius: 5px; }\\n  [type='range']::-moz-range-thumb {\\n    background: #AD0034;\\n    border: 2px solid #FF87AA;\\n    border-radius: 12px;\\n    cursor: pointer;\\n    height: 24px;\\n    width: 24px; }\\n  [type='range']::-ms-track {\\n    cursor: pointer;\\n    height: 2px;\\n    width: 100%;\\n    background: transparent;\\n    border-color: transparent;\\n    border-width: 12px 0;\\n    color: transparent; }\\n  [type='range']::-ms-fill-lower {\\n    background: #545454;\\n    border-radius: 10px; }\\n  [type='range']::-ms-fill-upper {\\n    background: #616161;\\n    border-radius: 10px; }\\n  [type='range']::-ms-thumb {\\n    background: #AD0034;\\n    border: 2px solid #FF87AA;\\n    border-radius: 12px;\\n    cursor: pointer;\\n    height: 24px;\\n    width: 24px;\\n    margin-top: 0; }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/css-loader?modules&importLoaders=1&localIdentName=[name]__[local]___[hash:base64:5]!../node_modules/sass-loader/lib/loader.js!./components/primitives/slider/styles.scss\n// module id = 143\n// module chunks = 0","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js?modules&importLoaders=1&localIdentName=[name]__[local]___[hash:base64:5]!../../../node_modules/sass-loader/lib/loader.js!./styles.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {\"hmr\":true}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js?modules&importLoaders=1&localIdentName=[name]__[local]___[hash:base64:5]!../../../node_modules/sass-loader/lib/loader.js!./styles.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js?modules&importLoaders=1&localIdentName=[name]__[local]___[hash:base64:5]!../../../node_modules/sass-loader/lib/loader.js!./styles.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./components/zoomPanner/styles.scss\n// module id = 144\n// module chunks = 0","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".styles__pan___21gpj {\\n  background-color: #EEE;\\n  color: #000;\\n  margin: 5px; }\\n\\n.styles__panActive___2OMRv {\\n  background-color: #FF3571;\\n  color: #FFF;\\n  margin: 5px; }\\n\\n.styles__zoomButton___2Hz36 {\\n  margin: 5px; }\\n\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"pan\": \"styles__pan___21gpj\",\n\t\"panActive\": \"styles__panActive___2OMRv\",\n\t\"zoomButton\": \"styles__zoomButton___2Hz36\"\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/css-loader?modules&importLoaders=1&localIdentName=[name]__[local]___[hash:base64:5]!../node_modules/sass-loader/lib/loader.js!./components/zoomPanner/styles.scss\n// module id = 145\n// module chunks = 0","import SLIC from './slic.js';\nimport { getImageDataFromImage } from 'services/imagetomesh/ImageUtil';\nimport loadImage from 'services/util/imageLoader';\nimport PanHandler from 'services/util/panHandler';\n\nconst SELECT_STATE = {\n  PAN: 'PAN',\n  SELECT: 'SELECT',\n  DESELECT: 'DESELECT'\n};\nconst MOUSE_STATE = {\n  UP: 'UP',\n  DOWN: 'DOWN',\n  OUTSIDE: 'OUTSIDE',\n};\n\nconst ImageEditorService = function () {\n  let that = this;\n  let context;\n  let width;\n  let height;\n  let mouse = {};\n  let mouseAbs = {};\n\n  let image;\n  let originalImageData;\n\n  let slic;\n  let slicSegmentsCentroids;\n\n  let highlightData;\n  let highlightImage = new Image();\n\n  let imageNoBackgroundData;\n  let imageNoBackgroundImage = new Image();\n\n  let dummyCanvas = document.createElement('canvas');\n  let dummyContext = dummyCanvas.getContext('2d');\n  let blankCanvas = document.createElement('canvas');\n  let blankContext = blankCanvas.getContext('2d');\n\n  let zoom = 1;\n  const panHandler = new PanHandler();\n\n  let mouseState = MOUSE_STATE.UP;\n  let selectState = SELECT_STATE.SELECT;\n\n/*****************************\n    API\n*****************************/\n\n    this.init = function(canvas, imageData, backgroundRemovalData) {\n      width = canvas.width;\n      height = canvas.height;\n      context = canvas.getContext('2d');\n      imageNoBackgroundData = backgroundRemovalData;\n\n      return loadImage(imageData)\n        .then((img) => {\n          const largerSize = Math.max(img.width, img.height);\n          const normWidth = (img.width / largerSize) * 400;\n          const normHeight = (img.height / largerSize) * 400;\n          width = normWidth;\n          height = normHeight;\n          dummyCanvas.width = normWidth;\n          dummyCanvas.height = normHeight;\n          image = img;\n        });\n    };\n\n    this.onMouseMove = (event, isTouch) => {\n      if (!isTouch) { event.preventDefault(); };\n      const rect = event.target.getBoundingClientRect();\n      mouseAbs.x = (event.clientX - rect.left) / zoom;\n      mouseAbs.y = (event.clientY - rect.top)  / zoom;\n      mouse.x = mouseAbs.x - panHandler.getPanPosition().x;\n      mouse.y = mouseAbs.y - panHandler.getPanPosition().y;\n      mouse.x = Math.round(mouse.x);\n      mouse.y = Math.round(mouse.y);\n\n      if (mouseState !== MOUSE_STATE.DOWN) {\n        that.updateHighligtedSuperpixel();\n        redraw();\n        return;\n      }\n      if (selectState === SELECT_STATE.PAN) {\n        panHandler.onMouseMove(mouseAbs.x, mouseAbs.y, zoom);\n        redraw();\n        return;\n      }\n      if (selectState === SELECT_STATE.SELECT) {\n        that.updateHighligtedSuperpixel();\n        that.addSelectionToNoBackgroundImage();\n      }\n      else if (selectState === SELECT_STATE.DESELECT) {\n        that.updateHighligtedSuperpixel();\n        that.removeSelectionFromNoBackgroundImage();\n      }\n    };\n\n    this.onMouseDown = (event, isTouch) => {\n      if (!isTouch) { event.preventDefault(); };\n      mouseState = MOUSE_STATE.DOWN;\n\n      panHandler.onMouseDown(mouseAbs.x, mouseAbs.y, zoom);\n\n      if (selectState === SELECT_STATE.SELECT) {\n        that.addSelectionToNoBackgroundImage();\n      }\n      if (selectState === SELECT_STATE.DESELECT) {\n        that.removeSelectionFromNoBackgroundImage();\n      }\n    };\n\n    this.onContextMenu = event => {\n      event.preventDefault();\n      return false;\n    }\n\n    this.onMouseUp = (event, isTouch) => {\n      if (!isTouch) { event.preventDefault(); };\n      mouseState = MOUSE_STATE.UP;\n    }\n\n    this.onMouseOut = event => {\n      event.preventDefault();\n      mouseState = MOUSE_STATE.OUTSIDE;\n      that.updateHighligtedSuperpixel();\n    }\n\n    this.onMouseOver = event => {\n      event.preventDefault();\n      if (mouseState !== MOUSE_STATE.DOWN) {\n        mouseState = MOUSE_STATE.UP;\n      }\n    };\n\n    this.onTouchStart = event => {\n      if (event.touches.length > 1) { return; }\n      const now = performance.now();\n      this.onMouseMove(event.touches[0], true); // build highlight data by forcing a \"mouse hover\"\n      this.onMouseDown(event.touches[0], true);\n    };\n\n    this.onTouchMove = event => {\n      event.preventDefault();\n      this.onMouseMove(event.touches[0], true);\n    };\n\n    this.onTouchEnd = event => {\n      if (event.touches.length) { return; }\n      this.onMouseUp(event);\n    };\n\n    this.doSlic = function(threshold) {\n      this.doSLICOnImage(threshold);\n      this.updateHighligtedSuperpixel();\n    }\n\n    this.zoomIn = function () {\n        zoom += 0.1;\n        redraw();\n    }\n\n    this.zoomOut = function () {\n        zoom -= 0.1;\n        redraw();\n    }\n\n    this.setSelectState = state => {\n      selectState = state;\n      panHandler.setPanEnabled(selectState === SELECT_STATE.PAN);\n    };\n\n    this.setMouseState = state => mouseState = state;\n\n    this.getImageForegroundSelection = () => imageNoBackgroundData;\n\n/*****************************\n    Private stuff\n*****************************/\n\n  this.doSLICOnImage = function (threshold) {\n    console.log('SLIC Start', performance.now());\n    const regionSize = threshold || 30;\n\n    originalImageData = getImageDataFromImage(image, dummyCanvas.width, dummyCanvas.height);\n    slic = new SLIC(originalImageData, { method: 'slic', regionSize });\n\n    if (!imageNoBackgroundData) {\n      // we are editing a new puppet without a selection\n      imageNoBackgroundData = context.createImageData(slic.result.width, slic.result.height);\n      // imageBackgroundMaskData = context.createImageData(slic.result.width, slic.result.height);\n      for (var i = 0; i < slic.result.data.length; i += 4) {\n        imageNoBackgroundData.data[i]     = 0;\n        imageNoBackgroundData.data[i + 1] = 0;\n        imageNoBackgroundData.data[i + 2] = 0;\n        imageNoBackgroundData.data[i + 3] = 0;\n      }\n    }\n    else {\n      if (!imageNoBackgroundData.data.length) {\n        console.error('Error', 'incorrect imageNoBackgroundData');\n        return;\n      }\n      const tempNoBgData = context.createImageData(slic.result.width, slic.result.height);\n      dummyContext.putImageData(imageNoBackgroundData, 0, 0);\n      imageNoBackgroundImage.src = dummyCanvas.toDataURL('image/png');\n    }\n    redraw();\n    console.log('SLIC Done', performance.now());\n  }\n\n  this.getEncodedSLICLabel = function (array, offset) {\n    return array[offset] |\n          (array[offset + 1] << 8) |\n          (array[offset + 2] << 16);\n  }\n\n  this.addSelectionToNoBackgroundImage = function () {\n    for (var i = 0; i < slic.result.data.length; i += 4) {\n      if(highlightData.data[i+3] === 255) {\n        imageNoBackgroundData.data[i]     = 255;\n        imageNoBackgroundData.data[i + 1] = 255;\n        imageNoBackgroundData.data[i + 2] = 255;\n        imageNoBackgroundData.data[i + 3] = 255;\n      }\n    }\n    dummyContext.putImageData(imageNoBackgroundData, 0, 0);\n    imageNoBackgroundImage.src = dummyCanvas.toDataURL('image/png');\n  }\n\n  this.removeSelectionFromNoBackgroundImage = function () {\n    for (var i = 0; i < slic.result.data.length; i += 4) {\n      if(highlightData.data[i+3] === 255) {\n        imageNoBackgroundData.data[i]     = 0;\n        imageNoBackgroundData.data[i + 1] = 0;\n        imageNoBackgroundData.data[i + 2] = 0;\n        imageNoBackgroundData.data[i + 3] = 0;\n      }\n    }\n    dummyContext.putImageData(imageNoBackgroundData, 0, 0);\n    imageNoBackgroundImage.src = dummyCanvas.toDataURL('image/png');\n  }\n\n  this.updateHighligtedSuperpixel = function () {\n    if (!slic) {\n      return;\n    }\n    if (mouseState === MOUSE_STATE.OUTSIDE) {\n      highlightImage.src = blankCanvas.toDataURL('image/png');\n      highlightImage.onload = () => redraw();\n      return;\n    }\n    const selectedLabel = [];\n    const selectedIndex = 4*(mouse.y*slic.result.width+mouse.x);\n    selectedLabel.push(slic.result.data[selectedIndex]);\n    selectedLabel.push(slic.result.data[selectedIndex+1]);\n    selectedLabel.push(slic.result.data[selectedIndex+2]);\n\n    highlightData = context.createImageData(slic.result.width, slic.result.height);\n\n    for (var i = 0; i < slic.result.data.length; i += 4) {\n      if(selectedLabel[0] === slic.result.data[i] &&\n       selectedLabel[1] === slic.result.data[i+1] &&\n       selectedLabel[2] === slic.result.data[i+2]) {\n        highlightData.data[i]     = 255;\n        highlightData.data[i + 1] = 0;\n        highlightData.data[i + 2] = 0;\n        highlightData.data[i + 3] = 255;\n      } else {\n        highlightData.data[i]     = 255;\n        highlightData.data[i + 1] = 0;\n        highlightData.data[i + 2] = 0;\n        highlightData.data[i + 3] = 0;\n      }\n    }\n\n    dummyContext.putImageData(highlightData, 0, 0);\n    highlightImage.src = dummyCanvas.toDataURL('image/png');\n    highlightImage.onload = () => redraw();\n  }\n\n  const redraw = () => {\n    if (!image) { return; }\n    context.clearRect(0, 0, width, height);\n\n    context.save();\n    context.scale(zoom, zoom);\n    context.translate(panHandler.getPanPosition().x, panHandler.getPanPosition().y);\n\n    context.globalAlpha = 1.0;\n    context.drawImage(image, 0, 0, image.width, image.height, 0, 0, width, height);\n    context.drawImage(highlightImage,\n                      0, 0, highlightImage.width, highlightImage.height,\n                      0, 0, width, height);\n    context.globalAlpha = 0.8;\n    context.drawImage(imageNoBackgroundImage,\n                      0, 0, imageNoBackgroundImage.width, imageNoBackgroundImage.height,\n                      0, 0, width, height);\n    context.globalAlpha = 1.0;\n\n    context.restore();\n  }\n\n}\n\nexport default ImageEditorService;\n\n\n\n// WEBPACK FOOTER //\n// ./services/imageToMesh/imageEditorService.js","/**\n * Javascript implementation of an image segmentation algorithm of\n *\n *    SLIC Superpixels\n *    Radhakrishna Achanta, Appu Shaji, Kevin Smith, Aurelien Lucchi, Pascal\n *    Fua, and Sabine Ssstrunk\n *    IEEE Transactions on Pattern Analysis and Machine Intelligence, vol. 34,\n *    num. 11, p. 2274 - 2282, May 2012.\n *\n * and based on the VLFeat implementation.\n *\n * API\n * ---\n *\n *    SLIC(imageURL, options)\n *\n * The function takes the following options.\n * * `regionSize` - Parameter of superpixel size\n * * `minRegionSize` - Minimum segment size in pixels.\n *\n * Copyright 2014  LongLong Yu.\n */\n\nfunction createImageData(width, height) {\n  var context = document.createElement(\"canvas\").getContext(\"2d\");\n  return context.createImageData(width, height);\n}\n\nexport default function SLIC(imageData, options) {\n  if (!(imageData instanceof ImageData))\n      throw \"Invalid ImageData\";\n  this.imageData = imageData;\n  this.imageData.data.set(imageData.data);\n  options = options || {};\n  this.regionSize = options.regionSize || 16;\n  this.minRegionSize = options.minRegionSize ||\n                       this.regionSize;\n  this.maxIterations = options.maxIterations || 10;\n  this._compute();\n}\n\nSLIC.prototype.finer = function () {\n  var newSize = Math.max(5, Math.round(this.regionSize / Math.sqrt(2.0)));\n  if (newSize !== this.regionSize) {\n    this.regionSize = newSize;\n    this.minRegionSize = Math.round(newSize * 0.8);\n    this._compute();\n  }\n};\n\nSLIC.prototype.coarser = function () {\n  var newSize = Math.min(640, Math.round(this.regionSize * Math.sqrt(2.0)));\n  if (newSize !== this.regionSize) {\n    this.regionSize = newSize;\n    this.minRegionSize = Math.round(newSize * 0.8);\n    this._compute();\n  }\n};\n\nSLIC.prototype._compute = function () {\n  this.result = computeSLICSegmentation(this.imageData,\n                                        this.regionSize,\n                                        this.minRegionSize,\n                                        this.maxIterations);\n};\n\n// Convert RGBA into XYZ color space. rgba: Red Green Blue Alpha.\nfunction rgb2xyz(rgba, w, h) {\n  var xyz = new Float32Array(3*w*h),\n      gamma = 2.2;\n  for (var i = 0; i<w*h; i++) {\n    // 1.0 / 255.9 = 0.00392156862.\n    var r = rgba[4*i+0] * 0.00392156862,\n        g = rgba[4*i+1] * 0.00392156862,\n        b = rgba[4*i+2] * 0.00392156862;\n    r = Math.pow(r, gamma);\n    g = Math.pow(g, gamma);\n    b = Math.pow(b, gamma);\n    xyz[i] = (r * 0.4887180 + g * 0.310680 + b * 0.2006020);\n    xyz[i + w*h] = (r * 0.1762040 + g * 0.812985 + b * 0.0108109);\n    xyz[i + 2*w*h] = (g * 0.0102048 + b * 0.989795);\n  }\n  return xyz;\n}\n\n// Convert XYZ to Lab.\nfunction xyz2lab(xyz, w, h) {\n  function f(x) {\n    if (x > 0.00856)\n      return Math.pow(x, 0.33333333);\n    else\n      return 7.78706891568 * x + 0.1379310336;\n  }\n  var xw = 1.0 / 3.0,\n      yw = 1.0 / 3.0,\n      Yw = 1.0,\n      Xw = xw / yw,\n      Zw = (1-xw-yw) / (yw * Yw),\n      ix = 1.0 / Xw,\n      iy = 1.0 / Yw,\n      iz = 1.0 / Zw,\n      labData = new Float32Array(3*w*h);\n  for (var i = 0; i<w*h; i++) {\n    var fx = f(xyz[i] * ix),\n        fy = f(xyz[w*h + i] * iy),\n        fz = f(xyz[2*w*h + i] * iz);\n    labData[i] = 116.0 * fy - 16.0;\n    labData[i + w*h] = 500.0 * (fx - fy);\n    labData[i + 2*w*h] = 200.0 * (fy - fz);\n  }\n  return labData;\n}\n\n// Compute gradient of 3 channel color space image.\nfunction computeEdge(image, edgeMap, w, h) {\n  for (var k = 0; k<3; k++) {\n    for (var y = 1; y<h-1; y++) {\n      for (var x = 1; x<w-1; x++) {\n        var a = image[k*w*h + y*w + x-1],\n            b = image[k*w*h + y*w + x+1],\n            c = image[k*w*h + (y+1)*w + x],\n            d = image[k*w*h + (y-1)*w + x];\n        edgeMap[y*w +x] += Math.pow(a-b, 2) + Math.pow(c-d, 2);\n      }\n    }\n  }\n}\n\n// Initialize superpixel clusters.\nfunction initializeKmeansCenters(image,\n                                 edgeMap,\n                                 centers,\n                                 clusterParams,\n                                 numRegionsX,\n                                 numRegionsY,\n                                 regionSize,\n                                 imW,\n                                 imH) {\n  var i = 0,\n      j = 0,\n      x,\n      y;\n  for (var v = 0; v < numRegionsY; v++) {\n    for (var u = 0; u < numRegionsX; u++) {\n      var centerx = 0,\n          centery = 0,\n          minEdgeValue = Infinity,\n          xp,\n          yp;\n      x = parseInt(Math.round(regionSize * (u + 0.5)), 10);\n      y = parseInt(Math.round(regionSize * (v + 0.5)), 10);\n      x = Math.max(Math.min(x, imW-1),0);\n      y = Math.max(Math.min(y, imH-1),0);\n      // Search in a 3x3 neighbourhood the smallest edge response.\n      for (yp = Math.max(0, y-1); yp <= Math.min(imH-1, y+1); ++yp) {\n        for (xp = Math.max(0, x-1); xp <= Math.min(imW-1, x+1); ++xp) {\n          var thisEdgeValue = edgeMap[yp * imW + xp];\n          if (thisEdgeValue < minEdgeValue) {\n            minEdgeValue = thisEdgeValue;\n            centerx = xp;\n            centery = yp;\n          }\n        }\n      }\n\n      // Initialize the new center at this location.\n      centers[i++] = parseFloat(centerx);\n      centers[i++] = parseFloat(centery);\n      // 3 channels.\n      centers[i++] = image[centery * imW + centerx];\n      centers[i++] = image[imW * imH + centery * imW + centerx];\n      centers[i++] = image[2 * imW * imH + centery * imW + centerx];\n      // THIS IS THE VARIABLE VALUE OF M, just start with 5.\n      clusterParams[j++] = 10*10;\n      clusterParams[j++] = regionSize * regionSize;\n    }\n  }\n}\n\n// Re-compute clusters.\nfunction computeCenters(image,\n                        segmentation,\n                        masses,\n                        centers,\n                        numRegions,\n                        imW,\n                        imH) {\n  var region;\n  for (var y = 0; y < imH; y++) {\n    for (var x = 0; x < imW; x++) {\n      region = segmentation[x + y * imW];\n      masses[region]++;\n      centers[region * 5 + 0] += x;\n      centers[region * 5 + 1] += y;\n      centers[region * 5 + 2] += image[y*imW + x];\n      centers[region * 5 + 3] += image[imW*imH + y*imW + x];\n      centers[region * 5 + 4] += image[2*imW*imH + y*imW + x];\n    }\n  }\n  for (region = 0; region < numRegions; region++) {\n    var iMass = 1.0 / Math.max(masses[region], 1e-8);\n    centers[region*5] = centers[region*5] * iMass;\n    centers[region*5+1] = centers[region*5+1] * iMass;\n    centers[region*5+2] = centers[region*5+2] * iMass;\n    centers[region*5+3] = centers[region*5+3] * iMass;\n    centers[region*5+4] = centers[region*5+4] * iMass;\n  }\n}\n\n// Remove small superpixels and assign them the nearest superpixel label.\nfunction eliminateSmallRegions(segmentation,\n                               minRegionSize,\n                               numPixels,\n                               imW,\n                               imH) {\n  var cleaned = new Int32Array(numPixels),\n      segment = new Int32Array(numPixels),\n      dx = new Array(1, -1, 0, 0),\n      dy = new Array(0, 0, 1, -1),\n      segmentSize,\n      label,\n      cleanedLabel,\n      numExpanded,\n      pixel,\n      x,\n      y,\n      xp,\n      yp,\n      neighbor,\n      direction;\n  for (pixel = 0; pixel < numPixels; ++pixel) {\n    if (cleaned[pixel]) continue;\n    label = segmentation[pixel];\n    numExpanded = 0;\n    segmentSize = 0;\n    segment[segmentSize++] = pixel;\n    /** Find cleanedLabel as the label of an already cleaned region neighbor\n     * of this pixel.\n     */\n    cleanedLabel = label + 1;\n    cleaned[pixel] = label + 1;\n    x = (pixel % imW);\n    y = Math.floor(pixel / imW);\n    for (direction = 0; direction < 4; direction++) {\n      xp = x + dx[direction];\n      yp = y + dy[direction];\n      neighbor = xp + yp * imW;\n      if (0 <= xp && xp < imW && 0 <= yp && yp < imH && cleaned[neighbor])\n        cleanedLabel = cleaned[neighbor];\n    }\n    // Expand the segment.\n    while (numExpanded < segmentSize) {\n      var open = segment[numExpanded++];\n      x = open % imW;\n      y = Math.floor(open / imW);\n      for (direction = 0; direction < 4; ++direction) {\n        xp = x + dx[direction];\n        yp = y + dy[direction];\n        neighbor = xp + yp * imW;\n        if (0 <= xp &&\n            xp < imW &&\n            0 <= yp &&\n            yp < imH &&\n            cleaned[neighbor] === 0 &&\n            segmentation[neighbor] === label) {\n          cleaned[neighbor] = label + 1;\n          segment[segmentSize++] = neighbor;\n        }\n      }\n    }\n\n    // Change label to cleanedLabel if the semgent is too small.\n    if (segmentSize < minRegionSize) {\n      while (segmentSize > 0)\n        cleaned[segment[--segmentSize]] = cleanedLabel;\n    }\n  }\n  // Restore base 0 indexing of the regions.\n  for (pixel = 0; pixel < numPixels; ++pixel)\n    --cleaned[pixel];\n  for (var i =0; i < numPixels; ++i)\n    segmentation[i] = cleaned[i];\n}\n\n// Update cluster parameters.\nfunction updateClusterParams(segmentation, mcMap, msMap, clusterParams) {\n  var mc = new Float32Array(clusterParams.length/2),\n      ms = new Float32Array(clusterParams.length/2);\n  for (var i = 0; i<segmentation.length; i++) {\n    var region = segmentation[i];\n    if (mc[region] < mcMap[region]) {\n      mc[region] = mcMap[region];\n      clusterParams[region*2+0] = mcMap[region];\n    }\n    if (ms[region] < msMap[region]) {\n      ms[region] = msMap[region];\n      clusterParams[region*2+1] = msMap[region];\n    }\n  }\n}\n\n// Assign superpixel label.\nfunction assignSuperpixelLabel(im,\n                               segmentation,\n                               mcMap,\n                               msMap,\n                               distanceMap,\n                               centers,\n                               clusterParams,\n                               numRegionsX,\n                               numRegionsY,\n                               regionSize,\n                               imW,\n                               imH) {\n  var x,\n      y;\n  for (var i = 0; i < distanceMap.length; ++i)\n    distanceMap[i] = Infinity;\n  var S = regionSize;\n  for (var region =0; region<numRegionsX * numRegionsY; ++region) {\n    var cx = Math.round(centers[region*5+0]),\n        cy = Math.round(centers[region*5+1]);\n    for (y = Math.max(0, cy - S);  y < Math.min(imH, cy + S); ++y) {\n      for (x = Math.max(0, cx - S); x < Math.min(imW, cx + S); ++x) {\n        var spatial = (x - cx) * (x - cx) + (y - cy) * (y - cy),\n            dR = im[y*imW + x] - centers[5*region + 2],\n            dG = im[imW * imH + y*imW + x] - centers[5*region + 3],\n            dB = im[2 * imW * imH + y*imW + x] - centers[5*region + 4],\n            appearance = dR * dR + dG * dG + dB * dB,\n            distance = Math.sqrt( appearance / clusterParams[region*2 + 0] +\n                       spatial / clusterParams[region*2 + 1]);\n        if (distance < distanceMap[y*imW + x]) {\n          distanceMap[y*imW + x] = distance;\n          segmentation[y*imW + x] = region;\n        }\n      }\n    }\n  }\n  // Update the max distance of color and space.\n  for (y = 0; y < imH; ++y) {\n    for (x = 0; x < imW; ++x) {\n      if (clusterParams[segmentation[y*imW + x]*2] < mcMap[y*imW + x])\n        clusterParams[segmentation[y*imW + x]*2] = mcMap[y*imW + x];\n      if (clusterParams[segmentation[y*imW + x]*2+1] < msMap[y*imW + x])\n        clusterParams[segmentation[y*imW + x]*2+1] = msMap[y*imW + x];\n    }\n  }\n}\n\n// ...\nfunction computeResidualError(prevCenters, currentCenters) {\n  var error = 0.0;\n  for (var i = 0; i < prevCenters.length; ++i) {\n    var d = prevCenters[i] - currentCenters[i];\n    error += Math.sqrt(d*d);\n  }\n  return error;\n}\n\n// Remap label indices.\nfunction remapLabels(segmentation) {\n  var map = {},\n      index = 0;\n  for (var i = 0; i < segmentation.length; ++i) {\n    var label = segmentation[i];\n    if (map[label] === undefined)\n      map[label] = index++;\n    segmentation[i] = map[label];\n  }\n  return index;\n}\n\n// Encode labels in RGB.\nfunction encodeLabels(segmentation, data) {\n  for (var i = 0; i < segmentation.length; ++i) {\n    var value = Math.floor(segmentation[i]);\n    data[4 * i + 0] = value & 255;\n    data[4 * i + 1] = (value >>> 8) & 255;\n    data[4 * i + 2] = (value >>> 16) & 255;\n    data[4 * i + 3] = 255;\n  }\n}\n\n// Compute SLIC Segmentation.\nfunction computeSLICSegmentation(imageData,\n                                 regionSize,\n                                 minRegionSize,\n                                 maxIterations) {\n  var i,\n      imWidth = imageData.width,\n      imHeight = imageData.height,\n      numRegionsX = Math.floor(imWidth / regionSize),\n      numRegionsY = Math.floor(imHeight / regionSize),\n      numRegions = Math.floor(numRegionsX * numRegionsY),\n      numPixels = Math.floor(imWidth * imHeight),\n      edgeMap = new Float32Array(numPixels),\n      masses = new Array(numPixels),\n      // 2 (geometric: x & y) and 3 (RGB or Lab)\n      currentCenters = new Float32Array((2+3)*numRegions),\n      newCenters = new Float32Array((2+3)*numRegions),\n      clusterParams = new Float32Array(2*numRegions),\n      mcMap = new Float32Array(numPixels),\n      msMap = new Float32Array(numPixels),\n      distanceMap = new Float32Array(numPixels),\n      xyzData = rgb2xyz(imageData.data, imWidth, imHeight),\n      labData = xyz2lab(xyzData, imWidth, imHeight);\n  // Compute edge.\n  computeEdge(labData, edgeMap, imWidth, imHeight);\n  // Initialize K-Means Centers.\n  initializeKmeansCenters(labData,\n                          edgeMap,\n                          currentCenters,\n                          clusterParams,\n                          numRegionsX,\n                          numRegionsY,\n                          regionSize,\n                          imWidth,\n                          imHeight);\n  var segmentation = new Int32Array(numPixels);\n  /** SLICO implementation: \"SLIC Superpixels Compared to State-of-the-art\n   * Superpixel Methods\"\n   */\n  for (var iter = 0; iter < maxIterations; ++iter) {\n    // Do assignment.\n    assignSuperpixelLabel(labData,\n                          segmentation,\n                          mcMap,\n                          msMap,\n                          distanceMap,\n                          currentCenters,\n                          clusterParams,\n                          numRegionsX,\n                          numRegionsY,\n                          regionSize,\n                          imWidth,\n                          imHeight);\n    // Update maximum spatial and color distances [1].\n    updateClusterParams(segmentation, mcMap, msMap, clusterParams);\n    // Compute new centers.\n    for (i = 0; i < masses.length; ++i)\n      masses[i] = 0;\n    for (i = 0; i < newCenters.length; ++i)\n      newCenters[i] = 0;\n    computeCenters(labData,\n                   segmentation,\n                   masses,\n                   newCenters,\n                   numRegions,\n                   imWidth,\n                   imHeight);\n    // Compute residual error of assignment.\n    var error = computeResidualError(currentCenters, newCenters);\n    if (error < 1e-5)\n      break;\n    for (i = 0; i < currentCenters.length; ++i)\n      currentCenters[i] = newCenters[i];\n  }\n  eliminateSmallRegions(segmentation,\n                        minRegionSize,\n                        numPixels,\n                        imWidth,\n                        imHeight);\n  // Refresh the canvas.\n  var result = createImageData(imWidth, imHeight);\n  result.numSegments = remapLabels(segmentation);\n  encodeLabels(segmentation, result.data);\n  return result;\n}\n\nfunction computeEdgemap(options) {\n  if (typeof options === \"undefined\") options = {};\n  var data = this.imageData.data,\n      width = this.imageData.width,\n      height = this.imageData.height,\n      edgeMap = new Uint8Array(this.imageData.data),\n      foreground = options.foreground || [255, 255, 255],\n      background = options.background || [0, 0, 0],\n      i, j, k;\n  for (i = 0; i < height; ++i) {\n    for (j = 0; j < width; ++j) {\n      var offset = 4 * (i * width + j),\n          index = data[4 * (i * width + j)],\n          isBoundary = (i === 0 ||\n                        j === 0 ||\n                        i === (height - 1) ||\n                        j === (width - 1) ||\n                        index !== data[4 * (i * width + j - 1)] ||\n                        index !== data[4 * (i * width + j + 1)] ||\n                        index !== data[4 * ((i - 1) * width + j)] ||\n                        index !== data[4 * ((i + 1) * width + j)]);\n      if (isBoundary) {\n        for (k = 0; k < foreground.length; ++k)\n          edgeMap[offset + k] = foreground[k];\n      }\n      else {\n        for (k = 0; k < background.length; ++k)\n          edgeMap[offset + k] = background[k];\n      }\n    }\n  }\n  data.set(edgeMap);\n  return this;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./services/imageToMesh/slic.js","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".styles__scrim___3brSS {\\n  width: 100%;\\n  height: 100%;\\n  left: 0;\\n  top: 0;\\n  position: absolute;\\n  background-color: rgba(0, 0, 0, 0.25);\\n  display: flex;\\n  justify-content: space-around;\\n  align-items: center; }\\n\\n.styles__puppetEditor___V4di8 {\\n  display: flex;\\n  flex-direction: column;\\n  flex-wrap: wrap;\\n  background-color: white;\\n  padding-left: 40px;\\n  padding-right: 40px;\\n  border-radius: 4px; }\\n  @media (max-width: 620px) {\\n    .styles__puppetEditor___V4di8 {\\n      width: 100%;\\n      height: 100%; } }\\n\\n.styles__editorControlRow___avcJD {\\n  height: 90px;\\n  display: flex;\\n  flex-direction: row;\\n  align-items: center; }\\n\\n.styles__rowSpaceAround___1Yrmb {\\n  width: 100%;\\n  justify-content: space-around; }\\n\\n.styles__editorControlDisable___1eQ0h {\\n  display: none;\\n  pointer-events: none; }\\n\\n.styles__editorControlLabel___2ieCH {\\n  font-size: 40px;\\n  padding-right: 10px; }\\n\\n.styles__editorCanvas___18fS0 {\\n  border: 1px solid black; }\\n\\n.styles__editorCanvasChecker___3GRU3 {\\n  border: 1px solid black;\\n  background-color: #FFF;\\n  background-size: 40px 40px;\\n  background-position: 0 0, 20px 20px;\\n  background-image: linear-gradient(45deg, #CCC 25%, transparent 25%, transparent 75%, #CCC 75%, #CCC), linear-gradient(45deg, #CCC 25%, transparent 25%, transparent 75%, #CCC 75%, #CCC); }\\n\\n.styles__editorControls___2O4Xh {\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: space-between;\\n  padding: 20px; }\\n\\n.styles__editorNav___1VSuf {\\n  margin: 10px 0;\\n  font-size: 20px;\\n  display: flex;\\n  flex-direction: row;\\n  justify-content: space-between; }\\n\\n.styles__navButton___EfAnt {\\n  height: 20px;\\n  min-width: 80px; }\\n\\n.styles__save___16VH- {\\n  display: flex;\\n  flex-direction: row;\\n  justify-content: flex-end; }\\n\\n.styles__drawEraseLabel___1EAco {\\n  min-width: 50px;\\n  margin-top: 10px; }\\n\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"scrim\": \"styles__scrim___3brSS\",\n\t\"puppetEditor\": \"styles__puppetEditor___V4di8\",\n\t\"editorControlRow\": \"styles__editorControlRow___avcJD\",\n\t\"rowSpaceAround\": \"styles__rowSpaceAround___1Yrmb\",\n\t\"editorControlDisable\": \"styles__editorControlDisable___1eQ0h\",\n\t\"editorControlLabel\": \"styles__editorControlLabel___2ieCH\",\n\t\"editorCanvas\": \"styles__editorCanvas___18fS0\",\n\t\"editorCanvasChecker\": \"styles__editorCanvasChecker___3GRU3\",\n\t\"editorControls\": \"styles__editorControls___2O4Xh\",\n\t\"editorNav\": \"styles__editorNav___1VSuf\",\n\t\"navButton\": \"styles__navButton___EfAnt\",\n\t\"save\": \"styles__save___16VH-\",\n\t\"drawEraseLabel\": \"styles__drawEraseLabel___1EAco\"\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/css-loader?modules&importLoaders=1&localIdentName=[name]__[local]___[hash:base64:5]!../node_modules/sass-loader/lib/loader.js!./components/puppetEditor/styles.scss\n// module id = 148\n// module chunks = 0","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Button from 'components/primitives/button';\nimport ControlPointService from 'services/imageToMesh/ControlPointService';\nimport styles from './styles.scss';\n\nclass ControlPointEditor extends Component {\n  componentWillMount() {\n    this.controlPointService = new ControlPointService();\n  }\n\n  componentDidMount() {\n    this.canvasElement.width = 400;\n    this.canvasElement.height = 300;\n\n    this.controlPointService.init(\n      this.canvasElement,\n      this.props.imageSrc,\n      this.props.backgroundRemovalData,\n      this.props.controlPointPositions\n    );\n\n    // passive touch event listeners seem to be needed, which react does not support\n    this.canvasElement.addEventListener(\n      'touchmove',\n      event => this.controlPointService.onTouchMove(event),\n      { passive: false }\n    );\n  }\n\n  onSave = () => this.props.onSave(this.controlPointService.getControlPoints())\n\n  render() {\n    return (\n      <div>\n\n        <div className={styles.editorNav}>\n          <Button\n            onClick={this.props.onClose}\n            className={styles.navButton}\n          >\n            Back\n          </Button>\n          <Button\n            onClick={this.onSave}\n            className={styles.navButton}\n          >\n            Done\n          </Button>\n        </div>\n\n        <div>\n          <canvas\n            className={styles.editorCanvasChecker}\n            ref={input => this.canvasElement = input}\n            onMouseMove={this.controlPointService.onMouseMove}\n            onMouseDown={this.controlPointService.onMouseDown}\n            onContextMenu={this.controlPointService.onContextMenu}\n            onMouseUp={this.controlPointService.onMouseUp}\n            onMouseOut={this.controlPointService.onMouseOut}\n            onMouseOver={this.controlPointService.onMouseOver}\n            onTouchStart={this.controlPointService.onTouchStart}\n            onTouchEnd={this.controlPointService.onTouchEnd}\n            onDoubleClick={this.controlPointService.onDoubleClick}\n          />\n        </div>\n\n        <div className={styles.editorControlParam}>\n          <div className={styles.editorControlRow}>\n            <div className={styles.editorControlLabel}>\n              <p>2</p>\n            </div>\n            <p>Control Points</p>\n          </div>\n        </div>\n\n      </div>\n    );\n  }\n}\n\nControlPointEditor.propTypes = {\n  onClose: PropTypes.func.isRequired,\n  onSave: PropTypes.func.isRequired,\n  imageSrc: PropTypes.string.isRequired,\n  backgroundRemovalData: PropTypes.object.isRequired,\n  controlPointPositions: PropTypes.array\n};\n\nexport default ControlPointEditor;\n\n\n\n// WEBPACK FOOTER //\n// ./components/puppetEditor/ControlPointEditor.js","import { extractForeground, getImageDataFromImage } from 'services/imagetomesh/ImageUtil.js';\nimport loadImage from 'services/util/imageLoader';\nimport PanHandler from 'services/util/panHandler';\nimport { getDistance } from 'services/util/math';\n\nconst MOUSE_STATE = {\n  UP: 'UP',\n  DOWN: 'DOWN',\n  OUTSIDE: 'OUTSIDE',\n};\n\nconst ControlPointService = function () {\n  let that = this;\n  let context;\n  let width;\n  let height;\n  let mouse = {};\n  let mouseAbs = {};\n\n  let foregroundImage;\n  let controlPoints = [];\n  let controlPointIndices = [];\n  let activeControlPointIndex = -1;\n\n  let zoom = 1;\n  let lastTouchTime = 0;\n  const panHandler = new PanHandler();\n  let mouseState = MOUSE_STATE.UP;\n\n/*****************************\n    API\n*****************************/\n\n  this.init = function(canvas, imageData, backgroundRemovalData, controlPointPositions) {\n    width = canvas.width;\n    height = canvas.height;\n    context = canvas.getContext('2d');\n    controlPoints = controlPointPositions || [];\n    context.fillStyle = '#0099EE';\n\n    loadImage(imageData)\n      .then((img) => {\n        const largerSize = Math.max(img.width, img.height);\n        const normWidth = (img.width / largerSize) * 400;\n        const normHeight = (img.height / largerSize) * 400;\n        width = normWidth;\n        height = normHeight;\n        const originalImageData = getImageDataFromImage(img, width, height);\n        return extractForeground(originalImageData, backgroundRemovalData);\n      })\n      .then((imageNoBG) => {\n        foregroundImage = imageNoBG;\n        redraw();\n      });\n  };\n\n  this.onMouseMove = (event, isTouch) => {\n    if (!isTouch) { event.preventDefault(); };\n    const rect = event.target.getBoundingClientRect();\n    mouseAbs.x = (event.clientX - rect.left) / zoom;\n    mouseAbs.y = (event.clientY - rect.top)  / zoom;\n    mouse.x = mouseAbs.x - panHandler.getPanPosition().x;\n    mouse.y = mouseAbs.y - panHandler.getPanPosition().y;\n    mouse.x = Math.round(mouse.x);\n    mouse.y = Math.round(mouse.y);\n\n    if (!controlPoints.length) { return; }\n\n    // Hover state control point logic\n    if (mouseState === MOUSE_STATE.UP) {\n      const nearestControlPoint = controlPoints\n        .map((cp, index) => ({\n          index,\n          distance: getDistance(mouse.x, mouse.y, cp[0], cp[1])\n        }))\n        .filter(cp => cp.distance < 10)\n        .sort((a, b) => a.distance - b.distance)[0];\n\n      if (nearestControlPoint !== undefined) {\n        activeControlPointIndex = nearestControlPoint.index;\n      }\n      else {\n        activeControlPointIndex = -1;\n      }\n    }\n    // Dragging control point logic\n    if (mouseState === MOUSE_STATE.DOWN && controlPoints[activeControlPointIndex]) {\n      const cp = controlPoints[activeControlPointIndex];\n      cp[0] = mouse.x;\n      cp[1] = mouse.y;\n    }\n    redraw();\n  };\n\n  this.onMouseDown = (event, isTouch) => {\n    if (!isTouch) { event.preventDefault(); };\n    mouseState = MOUSE_STATE.DOWN;\n    if (activeControlPointIndex >= 0) { return; }\n    controlPoints.push([ mouse.x, mouse.y ]);\n    activeControlPointIndex = controlPoints.length - 1;\n    redraw();\n  };\n\n  this.onContextMenu = event => {\n    event.preventDefault();\n    return false;\n  }\n\n  this.onMouseUp = (event, isTouch) => {\n    if (!isTouch) { event.preventDefault(); };\n    mouseState = MOUSE_STATE.UP;\n  }\n\n  this.onMouseOut = event => {\n    event.preventDefault();\n    mouseState = MOUSE_STATE.OUTSIDE;\n  }\n\n  this.onMouseOver = event => {\n    event.preventDefault();\n    if (mouseState !== MOUSE_STATE.DOWN) {\n      mouseState = MOUSE_STATE.UP;\n    }\n  };\n\n  this.onTouchStart = event => {\n    event.preventDefault();\n    if (event.touches.length > 1) { return; }\n    const now = performance.now();\n    const lastTouchDelta = now - lastTouchTime;\n    lastTouchTime = now;\n    if (lastTouchDelta < 200) {\n      this.onDoubleClick();\n      return;\n    }\n    this.onMouseMove(event.touches[0], true); // build highlight data by forcing a \"mouse hover\"\n    this.onMouseDown(event.touches[0], true);\n  };\n\n  this.onTouchMove = event => {\n    event.preventDefault();\n    this.onMouseMove(event.touches[0], true);\n  };\n\n  this.onTouchEnd = event => {\n    event.preventDefault();\n    if (event.touches.length) { return; }\n    this.onMouseUp(event);\n  };\n\n  this.onDoubleClick = event => {\n    if (activeControlPointIndex < 0) { return; }\n    controlPoints.splice(activeControlPointIndex, 1);\n    activeControlPointIndex = -1;\n    redraw();\n  };\n\n  this.getControlPoints = () => controlPoints;\n\n  this.setMouseState = state => mouseState = state;\n\n/*****************************\n    Private stuff\n*****************************/\n\n  const redraw = () => {\n    context.clearRect(0, 0, width, height);\n    context.drawImage(foregroundImage,\n                      0, 0, width, height,\n                      0, 0, width, height);\n    if (!controlPoints || !controlPoints.length) {\n      return;\n    }\n    controlPoints.forEach((cp, index) => {\n      const [x, y] = cp;\n      const radius = index === activeControlPointIndex ? 10 : 5;\n      context.beginPath();\n      context.arc(x, y, radius, 0, 2 * Math.PI);\n      context.fill();\n    });\n  }\n\n}\n\nexport default ControlPointService;\n\n\n\n// WEBPACK FOOTER //\n// ./services/imageToMesh/ControlPointService.js","import { Vector2 } from 'three';\nimport { getPuppetAndControlPointFromPostion } from 'services/dranimate/util';\n\nconst MOUSE_STATE = {\n  UP: 'UP',\n  DOWN: 'DOWN',\n  OUTSIDE: 'OUTSIDE',\n};\n\nexport default class DranimateMouseHandler {\n\n  constructor(rendererElement, panHandler) {\n    this.rendererElement = rendererElement;\n    this.panHandler = panHandler;\n    this.mouseState = MOUSE_STATE.UP;\n    this.mouseRelative = {x:0, y:0};\n    this.mouseAbsolute = {x:0, y:0};\n    this.selectedPuppet;\n    this.activeControlPoint = { hoveredOver: false, valid: false };\n  }\n\n  updateMousePosition(x, y, zoom) {\n    const boundingRect = this.rendererElement.getBoundingClientRect();\n    this.mouseAbsolute = {\n      x: x - boundingRect.left,\n      y: y - boundingRect.top\n    };\n    // TODO: set window width and height on resize\n    this.mouseRelative = {\n      x: (x - boundingRect.left - window.innerWidth / 2) / zoom - this.panHandler.getPanPosition().x,\n      y: (y - boundingRect.top - window.innerHeight / 2) / zoom - this.panHandler.getPanPosition().y\n    };\n  }\n\n  onMouseDown(event, puppets, zoom) {\n    this.updateMousePosition(event.clientX, event.clientY, zoom);\n    this.mouseState = MOUSE_STATE.DOWN;\n\n    if(this.panHandler.getPanEnabled()) {\n      this.panHandler.onMouseDown(this.mouseAbsolute.x, this.mouseAbsolute.y, zoom);\n      return;\n    }\n\n    if(this.activeControlPoint.hoveredOver) {\n      this.selectedPuppet = puppets[this.activeControlPoint.puppetIndex];\n      this.activeControlPoint.beingDragged = true;\n      puppets.forEach(puppet => puppet.setSelectionGUIVisible(puppet === this.selectedPuppet));\n      return;\n    }\n\n    // the notion of a selected puppet is only relative to mouse / touch, not leap motion\n    this.selectedPuppet = puppets.find(puppet => puppet.pointInsideMesh(this.mouseRelative.x, this.mouseRelative.y));\n    if (this.selectedPuppet) {\n      this.selectedPuppet.setSelectionState(true, this.mouseRelative.x, this.mouseRelative.y);\n    }\n    puppets.forEach(puppet => puppet.setSelectionGUIVisible(puppet === this.selectedPuppet));\n  }\n\n  onMouseMove(event, puppets, zoom) {\n    this.updateMousePosition(event.clientX, event.clientY, zoom);\n\n    /* Find control point closest to the mouse */\n\n    if(this.panHandler.getPanEnabled() && this.mouseState === MOUSE_STATE.DOWN) {\n      this.panHandler.onMouseMove(this.mouseAbsolute.x, this.mouseAbsolute.y, zoom);\n      return;\n    }\n\n    if (this.activeControlPoint.beingDragged) {\n      // control point is being dragged by mouse\n      const puppet = puppets[this.activeControlPoint.puppetIndex];\n      const ci = this.activeControlPoint.controlPointIndex;\n      const puppetCenter = puppet.getCenter();\n      const mouseVector = new Vector2(this.mouseRelative.x, this.mouseRelative.y)\n        .sub(puppetCenter)\n        .multiplyScalar(1 / puppet.getScale())\n        .add(puppetCenter);\n      puppet.setControlPointPosition(ci, mouseVector);\n      return;\n    }\n\n    if(this.selectedPuppet && this.selectedPuppet.selectionState.isBeingDragged) {\n      const mouseVector = new Vector2(this.mouseRelative.x, this.mouseRelative.y)\n      this.selectedPuppet.incrementPosition(mouseVector.x, mouseVector.y);\n      return;\n    }\n\n    const activeCp = getPuppetAndControlPointFromPostion(puppets, this.mouseRelative.x, this.mouseRelative.y, 10, zoom);\n    if (activeCp) {\n      this.activeControlPoint = activeCp;\n      this.rendererElement.parentNode.style.cursor = 'pointer';\n    }\n    else {\n      this.rendererElement.parentNode.style.cursor = 'default';\n      this.activeControlPoint.hoveredOver = false;\n    }\n  }\n\n  onMouseUp(event, puppets, zoom) {\n    this.updateMousePosition(event.clientX, event.clientY, zoom);\n    this.mouseState = MOUSE_STATE.UP;\n    if (this.panHandler.getPanEnabled()) {\n      return;\n    }\n    this.activeControlPoint.beingDragged = false;\n    if (this.selectedPuppet) {\n      this.selectedPuppet.setSelectionState(false);\n    }\n  }\n\n  getSelectedPuppet() {\n    return this.selectedPuppet;\n  }\n\n  onRemovePuppet() {\n    this.selectedPuppet = null;\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./services/dranimate/mouseHandler.js","import * as Leap from 'leapjs';\nimport { Vector2 } from 'three';\n\nfunction transformLeapCoordinate(vector) {\n  return {\n    x:  vector[0] * 1.5,\n    y: -(vector[1] - 200) * 1.5\n  }\n}\n\nexport default class DranimateLeapHandler {\n\n  constructor(rendererElement, panHandler, puppets) {\n    this.rendererElement = rendererElement;\n    this.panHandler = panHandler;\n    this.puppets = puppets;\n    this.controllerIsConnected = false;\n    this.leapController = new Leap.Controller({\n      frameEventName: 'deviceFrame',\n    }).connect();\n    this.lastFrameId;\n  }\n\n  update(selectedPuppet) {\n    if (!selectedPuppet) {\n      return;\n    }\n    const leapFrame = this.leapController.frame();\n    if (!leapFrame.valid || !leapFrame.hands.length) {\n      return;\n    }\n    const hand = leapFrame.hands[0];\n    const thumb = transformLeapCoordinate(hand.fingers[0].distal.center());\n    const pointer = transformLeapCoordinate(hand.fingers[1].distal.center());\n    const middle = transformLeapCoordinate(hand.fingers[2].distal.center());\n    const ring = transformLeapCoordinate(hand.fingers[3].distal.center());\n    const pinky = transformLeapCoordinate(hand.fingers[4].distal.center());\n    this.normalizeControlPoints(selectedPuppet, [\n      { cpi: 0, position: new Vector2(thumb.x, thumb.y) },\n      { cpi: 1, position: new Vector2(pointer.x, pointer.y) },\n      { cpi: 2, position: new Vector2(middle.x, middle.y) },\n      { cpi: 3, position: new Vector2(ring.x, ring.y) },\n      { cpi: 4, position: new Vector2(pinky.x, pinky.y) }\n    ]);\n  }\n\n  normalizeControlPoints(puppet, frames) {\n    const puppetCenter = puppet.getCenter();\n    const normalizedFrames = frames\n      .map((frame) => {\n        const position = frame.position\n          .sub(puppetCenter)\n          .multiplyScalar(1 / puppet.getScale())\n          .add(puppetCenter);\n        return {\n          cpi: frame.cpi,\n          position\n        };\n      });\n    puppet.setControlPointPositions(normalizedFrames);\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./services/dranimate/leapHandler.js","import { Vector2 } from 'three';\nimport { getPuppetAndControlPointFromPostion } from 'services/dranimate/util';\n\nfunction getFirstTouchLocation(event, rendererElement) {\n  const firstTouch = event.touches[0];\n  const boundingRect = rendererElement.getBoundingClientRect();\n  return {\n    x: firstTouch.clientX - boundingRect.left,\n    y: firstTouch.clientY - boundingRect.top\n  };\n}\n\nfunction getRelativeTouchPosition(x, y, rendererElement, panHandler, zoom) {\n  const boundingRect = rendererElement.getBoundingClientRect();\n  return {\n    x: (x - boundingRect.left - window.innerWidth / 2) / zoom - panHandler.getPanPosition().x,\n    y: (y - boundingRect.top - window.innerHeight / 2) / zoom - panHandler.getPanPosition().y\n  };\n}\n\nexport default class DranimateTouchHandler {\n\n  constructor(rendererElement, panHandler) {\n    this.rendererElement = rendererElement;\n    this.panHandler = panHandler;\n    this.touchMap = new Map();\n    this.selectedPuppet;\n  }\n\n  onTouchStart(event, puppets, zoom) {\n    if(this.panHandler.getPanEnabled()) {\n      const firstTouchLocation = getFirstTouchLocation(event, this.rendererElement);\n      this.panHandler.onMouseDown(firstTouchLocation.x, firstTouchLocation.y, zoom);\n      return;\n    }\n\n    // IF A NEW TOUCH POINT IS WITHIN DISTANCE FROM PUPPET CONTROL POINT, ASSOCIATE THE TWO IN TOUCHMAP\n    const touch = event.changedTouches[0];\n    const relativePosition = getRelativeTouchPosition(touch.clientX, touch.clientY, this.rendererElement, this.panHandler, zoom);\n    const controlPoint = getPuppetAndControlPointFromPostion(puppets, relativePosition.x, relativePosition.y, 10, zoom);\n    if (controlPoint) {\n      this.touchMap.set(touch.identifier, controlPoint);\n      return;\n    }\n\n    // IF A SINGLE FINGER TOUCHES A PUPPET BUT NOT A CONTROL POINT, SELECT THE PUPPET\n    if (event.touches.length > 1) {\n      return;\n    }\n    this.selectedPuppet = puppets.find(puppet => puppet.pointInsideMesh(relativePosition.x, relativePosition.y));\n    if (this.selectedPuppet) {\n      this.selectedPuppet.setSelectionState(true, relativePosition.x, relativePosition.y);\n    }\n    puppets.forEach(puppet => puppet.setSelectionGUIVisible(puppet === this.selectedPuppet));\n  }\n\n  onTouchMove(event, puppets, zoom) {\n    event.preventDefault();\n\n    // PAN CAMERA\n    if(this.panHandler.getPanEnabled()) {\n      const firstTouchLocation = getFirstTouchLocation(event, this.rendererElement);\n      this.panHandler.onMouseMove(firstTouchLocation.x, firstTouchLocation.y, zoom);\n      return;\n    }\n\n    const normalizedTouchPoints = Object.values(event.touches)\n      .filter(touch => this.touchMap.has(touch.identifier))\n      .map((touch) => {\n        const controlPoint = this.touchMap.get(touch.identifier);\n        const puppet = puppets[controlPoint.puppetIndex];\n        const puppetCenter = puppet.getCenter();\n        const relativePosition = getRelativeTouchPosition(touch.clientX, touch.clientY, this.rendererElement, this.panHandler, zoom);\n        const position = new Vector2(relativePosition.x, relativePosition.y)\n          .sub(puppetCenter)\n          .multiplyScalar(1 / puppet.getScale())\n          .add(puppetCenter);\n        return {\n          cpi: controlPoint.controlPointIndex,\n          position\n        };\n      });\n\n    // EDIT CONTROL POINTS\n    if (normalizedTouchPoints.length) {\n      this.selectedPuppet.setControlPointPositions(normalizedTouchPoints);\n      return;\n    }\n\n    // MOVE PUPPET XY\n    if (this.selectedPuppet) {\n      const firstTouch = event.touches[0];\n      const relativePosition = getRelativeTouchPosition(firstTouch.clientX, firstTouch.clientY, this.rendererElement, this.panHandler, zoom);\n      this.selectedPuppet.incrementPosition(relativePosition.x, relativePosition.y);\n      return;\n    }\n\n  }\n\n  onTouchEnd(event, puppets, zoom) {\n    const currentTouchIds = Object.values(event.touches).map(touch => touch.identifier);\n    // IF A REMOVED TOUCH POINT WAS ASSOCIATED WITH A CONTROL POINT, REMOVE IT FROM TOUCHMAP\n    [...this.touchMap.keys()]\n      .filter(touchId => !currentTouchIds.includes(touchId))\n      .forEach(touchId => this.touchMap.delete(touchId));\n  }\n\n  getSelectedPuppet() {\n    return this.selectedPuppet;\n  }\n\n  onRemovePuppet() {\n    this.selectedPuppet = null;\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./services/dranimate/touchHandler.js","import GIF from 'gif.js';\n\nexport default class GifRecorder {\n\n  constructor() {\n    this.recordingFrequency = 150;\n    this.recorder = new GIF({\n      workers: 2,\n      quality: 30,\n      workerScript: 'workers/gif.worker.js'\n    });\n    this.lastRecordedFrame = 0;\n  }\n\n  stop(canvasElement) {\n    const elapsedTime = performance.now() - this.lastRecordedFrame;\n    this.recorder.addFrame(canvasElement, {\n      delay: elapsedTime,\n      copy: true\n    });\n\n    return new Promise((resolve, reject) => {\n      try {\n        this.recorder.on('finished', blob => {\n          const objectUrl = URL.createObjectURL(blob);\n          resolve(objectUrl);\n        });\n        this.recorder.render();\n      }\n      catch(error) {\n        reject(error);\n      }\n    });\n  }\n\n  offerFrame(canvasElement) {\n    const now = performance.now();\n\n    // record first frame\n    if (!this.lastRecordedFrame) {\n      this.lastRecordedFrame = now;\n      this.recorder.addFrame(canvasElement, { copy: true });\n      return;\n    }\n\n    // record subsequent frames\n    const elapsedTime = now - this.lastRecordedFrame;\n    if (elapsedTime >= this.recordingFrequency) {\n      this.lastRecordedFrame = now;\n      this.recorder.addFrame(canvasElement, {\n        delay: elapsedTime,\n        copy: true\n      });\n    }\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./services/util/GifRecorder.js","import Delaunay from 'delaunay-fast';\nimport { extractForeground } from 'services/imagetomesh/ImageUtil.js';\nimport CanvasUtils from 'services/imagetomesh/canvasUtils.js';\nimport requestPuppetCreation from 'services/puppet/PuppetFactory';\n\nfunction findEdgesOfImage(imageNoBackgroundData) {\n  const width = imageNoBackgroundData.width;\n  const height = imageNoBackgroundData.height;\n  const data = imageNoBackgroundData.data;\n  const canvas = document.createElement('canvas');\n  const context = canvas.getContext('2d');\n  const contourData = context.createImageData(imageNoBackgroundData.width, imageNoBackgroundData.height);\n\n  for (let i = 0; i < height; ++i) {\n    for (let j = 0; j < width; ++j) {\n      const offset = 4 * (i * width + j);\n      const alpha = data[4 * (i * width + j) + 3];\n      const isSLICBoundary = (alpha !== data[4 * (i * width + j - 1)] ||\n                              alpha !== data[4 * (i * width + j + 1)] ||\n                              alpha !== data[4 * ((i - 1) * width + j)] ||\n                              alpha !== data[4 * ((i + 1) * width + j)]);\n      const isOnImageBorder = i === 0 ||\n                              j === 0 ||\n                              i === (height - 1) ||\n                              j === (width - 1);\n      const isBoundary = isSLICBoundary && !isOnImageBorder;\n      const p = 4 * (i * width + j);\n      if (isBoundary) {\n        contourData.data[p] = 255;\n        contourData.data[p+1] = 0;\n        contourData.data[p+2] = 0;\n        contourData.data[p+3] = 255;\n      } else {\n        contourData.data[p] = 255;\n        contourData.data[p+1] = 0;\n        contourData.data[p+2] = 0;\n        contourData.data[p+3] = 0;\n      }\n    }\n  }\n  return contourData;\n}\n\nfunction recalculateContourPoints(contourData) {\n    const contourPointsRaw = [];\n    /* Convert contour image into list of points */\n    for (let x = 0; x < contourData.width; ++x) {\n      for (let y = 0; y < contourData.height; ++y) {\n        if(CanvasUtils.getColorAtXY(x, y, 'a', contourData) === 255) {\n          contourPointsRaw.push([x,y]);\n        }\n      }\n    }\n    /* Resample list of points */\n    const resampleDist = 10;\n    for(let i = 0; i < contourPointsRaw.length; i++) {\n      const a = contourPointsRaw[i];\n      for(let j = 0; j < contourPointsRaw.length; j++) {\n        if(i != j) {\n          const b = contourPointsRaw[j];\n          const ax = a[0];\n          const ay = a[1];\n          const bx = b[0];\n          const by = b[1];\n          const dx = Math.abs(bx - ax);\n          const dy = Math.abs(by - ay);\n          if (Math.sqrt(dx * dx + dy * dy) < resampleDist) {\n            contourPointsRaw.splice(j, 1);\n            j--;\n          }\n        }\n      }\n    }\n    return contourPointsRaw;\n}\n\nfunction generatePuppetGeometry(contourPoints, controlPoints, imageNoBackgroundData) {\n  /* Create list of vertices from contour points */\n  const vertices = contourPoints.map(contourPoint => contourPoint);\n\n  /* Add vertices for requested control points as well */\n  const controlPointIndices = [];\n  controlPoints.forEach((controlPoint) => {\n    controlPointIndices.push(vertices.length);\n    vertices.push(controlPoint);\n  });\n\n  /* Run delaunay on vertices to generate mesh */\n  const rawTriangles = Delaunay.triangulate(vertices);\n\n  /* Remove trianges whose centroids are in the image background */\n  const triangles = [];\n  for(let i = 0; i < rawTriangles.length; i += 3) {\n    const x1 = vertices[rawTriangles[i]][0];\n    const y1 = vertices[rawTriangles[i]][1];\n    const x2 = vertices[rawTriangles[i + 1]][0];\n    const y2 = vertices[rawTriangles[i + 1]][1];\n    const x3 = vertices[rawTriangles[i + 2]][0];\n    const y3 = vertices[rawTriangles[i + 2]][1];\n    const centroidX = Math.round((x1 + x2 + x3) / 3);\n    const centroidY = Math.round((y1 + y2 + y3) / 3);\n    if(CanvasUtils.getColorAtXY(centroidX, centroidY, 'a', imageNoBackgroundData) === 255) {\n      triangles.push(rawTriangles[i]);\n      triangles.push(rawTriangles[i + 1]);\n      triangles.push(rawTriangles[i + 2]);\n    }\n  }\n\n  /* Remove vertices that aren't part of any triangle */\n  for (let vi = 0; vi < vertices.length; vi++) {\n    var vertexIsPartOfATriangle = false;\n    for (let ti = 0; ti < triangles.length; ti++) {\n      if (vi === triangles[ti]) {\n        vertexIsPartOfATriangle = true;\n      }\n    }\n    if (!vertexIsPartOfATriangle) {\n      vertices.splice(vi, 1)\n      /* Since we removed a vertex from the verts array, we need to update the\n       * control points and triangles because they point to the vertices by index. */\n      for (let ti = 0; ti < triangles.length; ti++) {\n        if (triangles[ti] > vi) {\n          triangles[ti] -= 1;\n        }\n      }\n      for (let cpi = 0; cpi < controlPointIndices.length; cpi++) {\n        if (controlPointIndices[cpi] > vi) {\n          controlPointIndices[cpi] -= 1;\n        }\n      }\n    }\n  }\n  return { triangles, vertices, controlPointIndices };\n}\n\nfunction generateMesh(puppetId, image, imageNoBackgroundData, originalImageData, controlPoints) {\n  const contourData = findEdgesOfImage(imageNoBackgroundData);\n  return extractForeground(originalImageData, imageNoBackgroundData)\n    .then((imageNoBG) => {\n      const contourPoints = recalculateContourPoints(contourData);\n      const geometry = generatePuppetGeometry(contourPoints, controlPoints, imageNoBackgroundData);\n      return Promise.resolve({\n        id: puppetId,\n        image,\n        vertices: geometry.vertices,\n        faces: geometry.triangles,\n        controlPoints: geometry.controlPointIndices,\n        controlPointPositions: controlPoints,\n        imageNoBG,\n        backgroundRemovalData: imageNoBackgroundData\n      });\n    })\n    .then(puppetParams => requestPuppetCreation(puppetParams));\n}\n\nexport { generateMesh };\n\n\n\n// WEBPACK FOOTER //\n// ./services/imagetomesh/generateMesh.js","/* Some utility functions for html5 canvas images. -zrispo */\n\nfunction getValueIndex(x, y, value, imageData) {\n  const index = CanvasUtils.getIndexOfXY(x,y,imageData);\n  let valueIndex = null;\n  if(value === 'r') {\n    valueIndex = index;\n  } else if(value === 'g') {\n    valueIndex = index + 1;\n  } else if(value === 'b') {\n    valueIndex = index + 2;\n  } else if(value === 'a') {\n    valueIndex = index + 3;\n  }\n  return valueIndex;\n}\n\nexport default class CanvasUtils {\n\n  static getIndexOfXY(x, y, imageData) {\n    return 4 * (y * imageData.width + x);\n  }\n\n  // TODO: move get value index out\n  static getColorAtXY(x, y, value, imageData) {\n    const valueIndex = getValueIndex(x, y, value, imageData);\n    if (valueIndex === null) {\n      console.log('Invalid value param for getColorAtXY! (r,g,b,or a expected!!)');\n      return null;\n    }\n    return imageData.data[valueIndex];\n  }\n\n  static setColorAtXY(x, y, value, imageData, newValue) {\n    const valueIndex = getValueIndex(x, y, value, imageData);\n    if (valueIndex === null) {\n      console.log('Invalid value param for getColorAtXY! (r,g,b,or a expected!!)');\n      return;\n    }\n    imageData.data[valueIndex] = newValue;\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./services/imagetomesh/canvasUtils.js","import { Vector2 } from 'three';\nimport ARAP from 'services/arap/arap';\nimport { PuppetRecording } from 'services/puppet/puppetRecording';\nimport { pointIsInsideTriangle } from 'services/util/math';\n\nconst Puppet = function(puppetData) {\n\n  // INITIAL VALUES\n  this.current = {\n    position: new Vector2(0, 0),\n    center: puppetData.halfSize.clone(),\n    rotation: 0,\n    scale: 1,\n  };\n  this.previous = {\n    position: this.current.position.clone(),\n    scale: this.current.scale,\n    rotation: this.current.rotation\n  };\n  this.selectionState = {\n    isBeingDragged: false,\n    lastPosition: new Vector2(0, 0)\n  };\n  this.name = 'DEFAULT_PUPPET_NAME';\n\n  // RECORDING\n  this.puppetRecording = new PuppetRecording();\n\n  // GRAPHICS\n  this.image = puppetData.image;\n  this.id = puppetData.id;\n  this.imageNoBG = puppetData.imageNoBG;\n  this.controlPointPositions = puppetData.controlPointPositions; // are these just unedited control points?\n  this.backgroundRemovalData = puppetData.backgroundRemovalData;\n  this.wireframeMaterial = this.wireframeMaterial;\n  this.texturedMaterial = puppetData.texturedMaterial;\n  this.verts = puppetData.verts;\n  this.faces = puppetData.faces;\n  this.controlPoints = puppetData.controlPoints;\n  this.vertsFlatArray = puppetData.vertsFlatArray;\n  this.facesFlatArray = puppetData.facesFlatArray;\n  this.threeMesh = puppetData.threeMesh;\n  this.boundingBox = puppetData.boundingBox;\n  this.controlPointSpheres = puppetData.controlPointSpheres;\n  this.group = puppetData.group;\n  this.centerSphere = puppetData.centerSphere;\n  this.undeformedVertices = this.verts;\n  this.needsUpdate = true;\n\n  // SETUP NEW ARAP MESH\n  console.log('----Puppet.generateMesh from ', this.vertsFlatArray.length / 2);\n  this.arapMeshID = ARAP.createNewARAPMesh(this.vertsFlatArray, this.facesFlatArray);\n  /* Add control points */\n  for(var i = 0; i < this.controlPoints.length; i++) {\n    ARAP.addControlPoint(this.arapMeshID, this.controlPoints[i]);\n  }\n  for(var i = 0; i < this.controlPoints.length; i++) {\n    var cpi = this.controlPoints[i];\n    ARAP.setControlPointPosition(this.arapMeshID, cpi, this.verts[cpi][0], this.verts[cpi][1]);\n  }\n};\n\nPuppet.prototype.incrementPosition = function(x, y) {\n  const position = new Vector2(x, y);\n  const delta = position.clone()\n    .sub(this.selectionState.lastPosition)\n    .multiplyScalar(1 / this.getScale())\n  this.current.center.add(\n    position.clone().sub(this.selectionState.lastPosition)\n  );\n  this.current.position.add(delta);\n  this.selectionState.lastPosition = position;\n}\n\nPuppet.prototype.setScale = function(scale) {\n  this.current.scale = scale;\n}\n\nPuppet.prototype.getScale = function() {\n  return this.current.scale;\n}\n\nPuppet.prototype.setRotation = function(rotation) {\n  this.current.rotation = rotation;\n}\n\nPuppet.prototype.getRotation = function() {\n  return this.current.rotation;\n}\n\nPuppet.prototype.setRenderWireframe = function(shouldRender) {\n  this.threeMesh.material = shouldRender ? this.wireframeMaterial : this.texturedMaterial;\n}\n\nPuppet.prototype.setSelectionState = function(isBeingDragged, x, y){\n  this.selectionState.isBeingDragged = isBeingDragged;\n  if (isBeingDragged) {\n    this.selectionState.lastPosition.x = x;\n    this.selectionState.lastPosition.y = y;\n  }\n}\n\nPuppet.prototype.startRecording = function () {\n  this.puppetRecording = new PuppetRecording(performance.now());\n}\n\nPuppet.prototype.stopRecording = function () {\n  this.puppetRecording.stop(performance.now());\n}\n\n// Set one to many control points (leap motion, touch)\nPuppet.prototype.setControlPointPositions = function(controlPoints) {\n  this.needsUpdate = true;\n  controlPoints.forEach(controlPoint => {\n    ARAP.setControlPointPosition(this.arapMeshID, this.controlPoints[controlPoint.cpi], controlPoint.position.x, controlPoint.position.y)\n  });\n  if (this.puppetRecording.isRecording) {\n    const puppetCenter = this.getCenter();\n    const normalizedControlPoints = controlPoints.map((controlPoint) => {\n      const position = controlPoint.position.clone()\n        .rotateAround(puppetCenter, -this.getRotation())\n        .sub(puppetCenter);\n      return {\n        cpi: controlPoint.cpi,\n        position\n      };\n    });\n    this.puppetRecording.setFrame(normalizedControlPoints, performance.now());\n  }\n}\n\n// Set a single control point (mouse interaction)\nPuppet.prototype.setControlPointPosition = function(controlPointIndex, position) {\n  this.needsUpdate = true;\n  ARAP.setControlPointPosition(this.arapMeshID, this.controlPoints[controlPointIndex], position.x, position.y);\n  if (this.puppetRecording.isRecording) {\n    const puppetCenter = this.getCenter();\n    const point = position\n      .rotateAround(puppetCenter, -this.getRotation())\n      .sub(puppetCenter);\n    const frame = [{\n      cpi: controlPointIndex,\n      position: point,\n    }];\n    this.puppetRecording.setFrame(frame, performance.now());\n  }\n}\n\nPuppet.prototype.update = function(elapsedTime) {\n  const dx = this.current.position.x - this.previous.position.x;\n  const dy = this.current.position.y - this.previous.position.y;\n  const shouldMoveXY = dx !== 0 || dy !== 0;\n  const shouldScale = this.previous.scale !== this.current.scale;\n  const shouldRotate = this.previous.rotation !== this.current.rotation;\n  this.previous.position.x = this.current.position.x;\n  this.previous.position.y = this.current.position.y;\n\n  // SCALE PUPPET\n  if (shouldScale) {\n    this.previous.scale = this.current.scale;\n    this.needsUpdate = true;\n  }\n\n  // ROTATE PUPPET\n  if (shouldRotate) {\n    const deltaRotation = this.current.rotation - this.previous.rotation;\n    this.previous.rotation = this.current.rotation;\n    const puppetCenter = this.getCenter();\n    this.controlPoints.forEach((controlPoint, index) => {\n      const {x, y} = this.threeMesh.geometry.vertices[controlPoint];\n      const point = new Vector2(x, y)\n        .sub(puppetCenter)\n        .multiplyScalar(1 / this.getScale())\n        .add(puppetCenter)\n        .rotateAround(puppetCenter, deltaRotation)\n      this.setControlPointPosition(index, point);\n    });\n  }\n\n  // TRANSLATE PUPPET\n  if(shouldMoveXY) {\n    const puppetCenter = this.getCenter();\n    const xyDelta = new Vector2(dx, dy);\n    this.controlPoints.forEach((controlPoint, index) => {\n      const position = this.threeMesh.geometry.vertices[controlPoint].clone();\n      const vertexPosition = new Vector2(position.x, position.y);\n      const point = vertexPosition\n        .sub(puppetCenter)\n        .multiplyScalar(1 / this.getScale())\n        .add(puppetCenter)\n        .add(xyDelta);\n      this.setControlPointPosition(index, point);\n    });\n  }\n\n  const recordedFrame = this.puppetRecording.update(performance.now());\n  if (recordedFrame) {\n    const puppetCenter = this.getCenter();\n    const absoluteControlPoints = recordedFrame.controlPoints.map((controlPoint) => {\n      const point = controlPoint.position.clone()\n        .add(puppetCenter)\n        .rotateAround(puppetCenter, this.getRotation());\n      return {\n        cpi: controlPoint.cpi,\n        position: point\n      };\n    });\n    this.setControlPointPositions(absoluteControlPoints);\n  }\n\n  // DEFORM PUPPET WITH ARAP\n  if(this.needsUpdate) {\n    // console.log('update');\n    // UPDATE ARAP DEFORMER\n    ARAP.updateMeshDeformation(this.arapMeshID);\n    const deformedVerts = ARAP.getDeformedVertices(this.arapMeshID, this.vertsFlatArray.length);\n    const puppetCenter = this.getCenter();\n    for (let i = 0; i < deformedVerts.length; i += 2) {\n      const vertex = this.threeMesh.geometry.vertices[i / 2];\n      const point = new Vector2(deformedVerts[i], deformedVerts[i + 1])\n        .sub(puppetCenter)\n        .multiplyScalar(this.getScale())\n        .add(puppetCenter);\n\n      vertex.x = point.x;\n      vertex.y = point.y;\n    }\n\n    // UPDATE CONTROL POINT GRAPHICS\n    this.controlPoints.forEach((controlPoint, index) => {\n      const vertex = this.threeMesh.geometry.vertices[controlPoint];\n      const controlPointSphere = this.controlPointSpheres[index];\n      controlPointSphere.position.x = vertex.x;\n      controlPointSphere.position.y = vertex.y;\n    });\n\n    // FOR TESTING THE CENTER OF THE PUPPET:\n    // this.centerSphere.position.x = this.current.center.x;\n    // this.centerSphere.position.y = this.current.center.y;\n\n    // UPDATE MISC THREEJS\n    this.threeMesh.geometry.dynamic = true;\n    this.threeMesh.geometry.verticesNeedUpdate = true;\n    this.boundingBox.update();\n    this.boundingBox.scale.z = 1; // To make sure volume != 0 (this will cause that warning to show up)\n    this.needsUpdate = false;\n  }\n\n};\n\nPuppet.prototype.getCenter = function() {\n  return this.current.center.clone();\n};\n\nPuppet.prototype.cleanup = function () {\n  console.error(\"Warning: Puppet.cleanup() not yet implemented! You are wasting memory! >:(\")\n}\n\nPuppet.prototype.setSelectionGUIVisible = function (visible) {\n  this.boundingBox.visible = visible;\n  this.controlPointSpheres.forEach(sphere => sphere.visible = visible);\n}\n\nPuppet.prototype.pointInsideMesh = function (xUntransformed, yUntransformed) {\n  const point = new Vector2(xUntransformed, yUntransformed)\n  const allFaces = this.threeMesh.geometry.faces;\n  const allVerts = this.threeMesh.geometry.vertices;\n  for(let i = 0; i < allFaces.length; i++) {\n    const v1 = allVerts[allFaces[i].a];\n    const v2 = allVerts[allFaces[i].b];\n    const v3 = allVerts[allFaces[i].c];\n    if (pointIsInsideTriangle(point.x, point.y, v1, v2, v3)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport default Puppet;\n\n\n\n// WEBPACK FOOTER //\n// ./services/puppet/puppet.js","/*  ARAP.js  *\n * zrispo.co */\n\n /* this library only uses flat arrays that represent vertices and triangles\n  * for simplicity, it's recommended to use arap-three.js which wraps this\n  * code and handles all that nasty stuff for you. */\n\n\nvar ARAP = (function () {\n\n\tvar arap = { REVISION: \"dev\" };\n\n/* Wrapper functions for the emscripten module */\n\n\tvar createNewMeshWrapper = Module.cwrap(\n\t  'createNewMesh','[number]',['number']\n\t);\n\n\tvar setMeshVertexDataWrapper = Module.cwrap(\n\t  'setMeshVertexData', 'number', ['number', 'number', 'number']\n\t);\n\n\tvar setMeshTriangleDataWrapper = Module.cwrap(\n\t  'setMeshTriangleData', 'number', ['number', 'number', 'number']\n\t);\n\n\tvar setupMeshDeformerWrapper = Module.cwrap(\n\t\t'setupMeshDeformer','number', ['number']\n\t);\n\n\tvar addControlPointWrapper = Module.cwrap(\n\t\t'addControlPoint','number', ['number','number']\n\t);\n\n\tvar setControlPointPositionWrapper = Module.cwrap(\n\t\t'setControlPointPosition','[number]', ['number', 'number', 'number', 'number']\n\t);\n\n\tvar updateMeshDeformationWrapper = Module.cwrap(\n\t\t'updateMeshDeformation','[number]', ['number']\n\t);\n\n\tvar getMeshVertexDataWrapper = Module.cwrap(\n\t  'getMeshVertexData', 'number', ['number', 'number', 'number']\n\t);\n\n/* Small helper function that handles all the nasty memory stuff for arrays */\n\n\tvar doArrayFunction = function(arr, func, optionalArg) {\n\n\t\t// Create data\n\t\tvar data = new Float32Array(arr);\n\n\t\t// Get data byte size, allocate memory on Emscripten heap, and get pointer\n\t\tvar nDataBytes = data.length * data.BYTES_PER_ELEMENT;\n\t\tvar dataPtr = Module._malloc(nDataBytes);\n\n\t\t// Copy data to Emscripten heap (directly accessed from Module.HEAPU8)\n\t\tvar dataHeap = new Uint8Array(Module.HEAPU8.buffer,\n\t\t\t                          dataPtr,\n\t\t\t                          nDataBytes);\n\t\tdataHeap.set(new Uint8Array(data.buffer));\n\n\t\t// Call function and get result\n\t\tfunc(optionalArg, dataHeap.byteOffset, data.length);\n\t\tvar result = new Float32Array(dataHeap.buffer,\n\t\t\t                          dataHeap.byteOffset,\n\t\t\t                          data.length);\n\n\t\t// Free memory\n\t\tModule._free(dataPtr);\n\n\t\t//return result.slice(); // use slice() to make a copy of result\n\t\treturn result;\n\n\t}\n\n/* Exposed functions */\n\n\t/* Creates a new mesh inside the module and returns the index of the mesh\n\t * in the module's internal array. */\n\tarap.createNewARAPMesh = function(verts, tris) {\n\t\t// make new mesh\n\t\tvar meshIndex = createNewMeshWrapper();\n\n\t\t// add vertices\n\t\tdoArrayFunction(verts, setMeshVertexDataWrapper, meshIndex);\n\n\t\t// add faces\n\t\tdoArrayFunction(tris, setMeshTriangleDataWrapper, meshIndex);\n\n\t\t// setup mesh deformer\n\t\tsetupMeshDeformerWrapper(meshIndex);\n\n\t\tconsole.log(\"new mesh created with ID \" + meshIndex)\n\t\treturn meshIndex;\n\t}\n\n\t/*  */\n\tarap.addControlPoint = function(meshIndex, vertIndex) {\n\t\taddControlPointWrapper(meshIndex, vertIndex);\n\t}\n\n\t/*  */\n\tarap.setControlPointPosition = function(meshIndex, vertIndex, x, y) {\n\t\tsetControlPointPositionWrapper(meshIndex, vertIndex, x, y);\n\t}\n\n\t/* Call this after adding and setting the positions of control points.\n\t * This is where all the work for mesh deformation is done.\n\t * Note that the first time you call updateMeshDeformation after adding\n\t * or removing control points, deform2d must recompute a bunch of\n\t * stuff which is very slow. */\n\tarap.updateMeshDeformation = function(meshIndex) {\n\t\tupdateMeshDeformationWrapper(meshIndex);\n\t}\n\n\t/* Call this after calling update() to get your vertices deformed by the\n\t * control points. */\n\t/* ~Possible optimization: return all verts in one big array to avoid memory\n\t * stuff overhead*/\n\tarap.getDeformedVertices = function(meshIndex, size) {\n\t\tvar empty = [];\n\t\tfor(var i = 0; i < size; i++) {\n\t\t\tempty.push(0);\n\t\t}\n\n\t\t/* use optionalArg for meshIndex (this is gross - should make a better way) */\n\t\t//var deformedVerts = doArrayFunction(empty, getMeshVertexDataWrapper, meshIndex);\n\n\t\tvar numBytes = empty.length * Float32Array.BYTES_PER_ELEMENT;\n\t\tvar ptr = Module._malloc(numBytes);\n\t\tgetMeshVertexDataWrapper(meshIndex, ptr, empty.length)\n\n\t\tvar deformedVerts = []\n\n\t\tfor(var i = 0; i < empty.length; i++) {\n\t\t\tvar v = HEAPF32[(ptr/Float32Array.BYTES_PER_ELEMENT)+i]\n\t\t\tdeformedVerts.push(v)\n\t\t}\n\n\t\treturn deformedVerts;\n\t}\n\n\treturn arap;\n\n})();\n\nexport default ARAP;\n\n\n\n// WEBPACK FOOTER //\n// ./services/arap/arap.js","import { Vector2 } from 'three';\n\nconst TIME_DELTA = 0.001;\n\nclass PuppetRecording {\n\n  constructor(timestamp) {\n    const now = (timestamp !== undefined) ? timestamp : performance.now();\n    this.hasRecording = false;\n    this.isRecording = true;\n    this.controlPointFrames = [];\n    this.relativePoints = [];\n    this.startTime = now;\n    this.stopTime = now;\n    this.duration = 0;\n    this.activeIndex = -1;\n    // this.allIndices = new Set();\n    this.id = Math.random();\n    this.lastServedIndex;\n  }\n\n  stop(timestamp) {\n    this.stopTime = timestamp;\n    this.duration = this.stopTime - this.startTime;\n    this.hasRecording = true;\n    this.isRecording = false;\n    // attach relative times to each frames\n    this.controlPointFrames.forEach((frame) => {\n      const relativeTime = (frame.timestamp - this.startTime) / this.duration;\n      frame.relativeTime = relativeTime;\n    });\n    this.relativePoints = this.controlPointFrames.map((frame, index) => ({\n      index,\n      relativeTime: frame.relativeTime\n    }));\n  }\n\n  setFrame(controlPoints, timestamp) {\n    this.controlPointFrames.push({ controlPoints, timestamp });\n  }\n\n  update(timestamp) {\n    if (!timestamp || timestamp <= this.stopTime) {\n      throw new Error('Update must take place after recording has stopped');\n    }\n    if (!this.hasRecording) { return; }\n    const timeSinceStop = timestamp - this.stopTime;\n    const relativeTimeInLoop = (timeSinceStop / this.duration) % 1;\n    const closestIndex = this._getNearestIndexForRelativePoint(relativeTimeInLoop);\n    if (this.lastServedIndex !== closestIndex) {\n      this.lastServedIndex = closestIndex;\n      return this.controlPointFrames[closestIndex];\n    }\n  }\n\n  // Binary search for nearset relativePoint\n  _getNearestIndexForRelativePoint(relativeTimeInLoop) {\n    let low = 0;\n    let high = this.relativePoints.length - 1;\n    while (low < high) {\n      const mid = Math.floor((low + high) / 2);\n      const d1 = Math.abs(this.relativePoints[mid].relativeTime - relativeTimeInLoop);\n      const d2 = Math.abs(this.relativePoints[mid + 1].relativeTime - relativeTimeInLoop);\n      if (d2 <= d1) {\n        low = mid + 1;\n      }\n      else {\n        high = mid;\n      }\n    }\n    return this.relativePoints[high].index;\n  }\n\n}\n\nexport { PuppetRecording };\n\n\n\n// WEBPACK FOOTER //\n// ./services/puppet/puppetRecording.js","import React, { Component } from 'react';\nimport Button from 'components/primitives/button';\nimport Fab from 'components/primitives/fab';\nimport TopBar from 'components/topbar';\nimport ParamControl from 'components/paramControl';\nimport Recorder from 'components/recorder';\nimport ZoomPanner from 'components/zoomPanner';\nimport PuppetEditor from 'components/puppetEditor';\nimport Profile from 'components/profile';\nimport { loadDranimateFile } from 'services/util/file';\nimport puppetEditorStateService from 'services/imageToMesh/PuppetEditorStateService';\nimport dranimate from 'services/dranimate/dranimate';\nimport styles from './styles.scss';\n\nclass Stage extends Component {\n\n  constructor() {\n    super();\n    this.state = {\n      editorIsOpen: false,\n      profileIsOpen: false,\n      controllerIsOpen: false,\n      selectedPuppet: null\n    };\n  }\n\n  componentDidMount = () => {\n    // passive touch event listeners seem to be needed, which react does not support\n    this.dranimateStageContainer.addEventListener(\n      'touchmove',\n      event => dranimate.onTouchMove(event),\n      { passive: false }\n    );\n\n    dranimate.setup(this.dranimateStageContainer);\n  };\n\n  // componentDidUpdate = (prevProps, prevState) => {\n  //   console.log('this.state', this.state);\n  // }\n\n  onMouseDown = event => {\n    dranimate.onMouseDown(event);\n    const selectedPuppet = dranimate.getSelectedPuppet();\n    this.setState({ selectedPuppet });\n  };\n\n  closeEditor = () => this.setState({ editorIsOpen: false });\n\n  closeProfile = () => this.setState({ profileIsOpen: false });\n\n  openController = controllerIsOpen => this.setState({ controllerIsOpen });\n\n  onFabClick = () => this.filePicker.click();\n\n  onZoomSelect = isZoomIn => isZoomIn ? dranimate.zoomIn() : dranimate.zoomOut();\n\n  onPanSelect = isPanSelected => dranimate.setPanEnabled(isPanSelected);\n\n  onDeleteSelectedPuppet = () => dranimate.deleteSelectedPuppet();\n\n  onEditSelectedPuppet = () => {\n    console.log('setItem?', dranimate.getSelectedPuppet())\n    puppetEditorStateService.setItem(dranimate.getSelectedPuppet());\n    this.setState({ editorIsOpen: true });\n  };\n\n  onFileChange = event => {\n    loadDranimateFile(this.filePicker)\n      .then((result) => {\n        const isPuppet = !!result.id;\n        if (isPuppet) {\n          dranimate.addPuppet(result);\n        }\n        else {\n          puppetEditorStateService.setItem(result);\n          this.setState({ editorIsOpen: true });\n        }\n      })\n      .catch(error => console.log('error', error));\n  }\n\n  onProfileClick = () => this.setState({ profileIsOpen: true });\n\n  render() {\n    return (\n      <div className={styles.stage}>\n        <div\n          className={styles.dranimateCanvas}\n          onMouseDown={this.onMouseDown}\n          onMouseMove={dranimate.onMouseMove}\n          onMouseUp={dranimate.onMouseUp}\n          onTouchStart={dranimate.onTouchStart}\n          onTouchEnd={dranimate.onTouchEnd}\n          ref={input => this.dranimateStageContainer = input}\n        />\n        <TopBar className={styles.topBar}/>\n        <Button\n          className={styles.profileButton}\n          onClick={this.onProfileClick}\n        >\n          Profile\n        </Button>\n        <ParamControl\n          className={styles.paramControl}\n          selectedPuppet={this.state.selectedPuppet}\n          onEditSelectedPuppet={this.onEditSelectedPuppet}\n          onDeleteSelectedPuppet={this.onDeleteSelectedPuppet}\n        />\n        <div className={styles.lowerLeft}>\n          <ZoomPanner\n            onPanSelect={this.onPanSelect}\n            onZoomSelect={this.onZoomSelect}\n          />\n          <Recorder />\n          {\n            /* <Button onClick={dranimate.onRenderToggle}>\n              Render toggle\n            </Button> */\n           }\n        </div>\n        <Fab\n          className={styles.fab}\n          onClick={this.onFabClick}\n        />\n        <input\n          type='file'\n          ref={input => this.filePicker = input}\n          onChange={this.onFileChange}\n          className={styles.hiddenFilePicker}\n        />\n        {\n          this.state.editorIsOpen ?\n            <PuppetEditor\n              onClose={this.closeEditor}\n            /> :\n            null\n        }\n        { this.state.profileIsOpen ? <Profile onClose={this.closeProfile}/> : null }\n      </div>\n    );\n  }\n}\n\nexport default Stage;\n\n\n\n// WEBPACK FOOTER //\n// ./components/stage/index.js","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './styles.scss';\n\nclass Fab extends Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    return (\n      <div className={this.props.className}>\n        <button onClick={this.props.onClick} className={styles.fab}>\n          <span className={styles.fabBar}></span>\n          <span className={styles.fabBar}></span>\n        </button>\n      </div>\n    );\n  }\n}\n\nFab.propTypes = {\n  onClick: PropTypes.func.isRequired,\n  className: PropTypes.string.isRequired\n};\n\nexport default Fab;\n\n\n\n// WEBPACK FOOTER //\n// ./components/primitives/fab/index.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/index.js?modules&importLoaders=1&localIdentName=[name]__[local]___[hash:base64:5]!../../../../node_modules/sass-loader/lib/loader.js!./styles.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {\"hmr\":true}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/index.js?modules&importLoaders=1&localIdentName=[name]__[local]___[hash:base64:5]!../../../../node_modules/sass-loader/lib/loader.js!./styles.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/index.js?modules&importLoaders=1&localIdentName=[name]__[local]___[hash:base64:5]!../../../../node_modules/sass-loader/lib/loader.js!./styles.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./components/primitives/fab/styles.scss\n// module id = 162\n// module chunks = 0","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".styles__fab___2g7mP {\\n  width: 40px;\\n  height: 40px;\\n  border-radius: 50%;\\n  background-color: #EEE;\\n  position: relative;\\n  box-shadow: 2px 2px 4px #979797;\\n  -webkit-box-shadow: 2px 2px 4px #979797;\\n  transition: box-shadow 0.15s ease-out, transform 0.15s ease-out, -webkit-box-shadow 0.15s ease-out; }\\n\\n.styles__fab___2g7mP:hover {\\n  transform: translate(0px, -2px);\\n  box-shadow: 3px 4px 4px #979797;\\n  -webkit-box-shadow: 3px 4px 4px #979797; }\\n\\n.styles__fabBar___2bt-R {\\n  display: block;\\n  position: absolute;\\n  height: 4px;\\n  width: 30px;\\n  border-radius: 2px;\\n  background-color: #FF3571;\\n  left: 5px;\\n  top: 18px; }\\n\\n.styles__fab___2g7mP :nth-child(1) {\\n  transform: rotate(0deg); }\\n\\n.styles__fab___2g7mP :nth-child(2) {\\n  transform: rotate(90deg); }\\n\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"fab\": \"styles__fab___2g7mP\",\n\t\"fabBar\": \"styles__fabBar___2bt-R\"\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/css-loader?modules&importLoaders=1&localIdentName=[name]__[local]___[hash:base64:5]!../node_modules/sass-loader/lib/loader.js!./components/primitives/fab/styles.scss\n// module id = 163\n// module chunks = 0","import React, { Component } from 'react';\nimport styles from './styles.scss';\n\nclass TopBar extends Component {\n  onInfoClick = () => console.log('onInfoClick');\n\n  render() {\n    return (\n      <div className={this.props.className}>\n        <div className={styles.topbar}>\n          <div className={`${styles.topbarItem} ${styles.aboutContainer}`}>\n            <p className={styles.aboutLabel}>Dranimate</p>\n            <p className={styles.aboutInfo}>About</p>\n          </div>\n        </div>\n      </div>  \n    );\n  }\n}\n\nexport default TopBar;\n\n\n\n// WEBPACK FOOTER //\n// ./components/topbar/index.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js?modules&importLoaders=1&localIdentName=[name]__[local]___[hash:base64:5]!../../../node_modules/sass-loader/lib/loader.js!./styles.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {\"hmr\":true}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js?modules&importLoaders=1&localIdentName=[name]__[local]___[hash:base64:5]!../../../node_modules/sass-loader/lib/loader.js!./styles.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js?modules&importLoaders=1&localIdentName=[name]__[local]___[hash:base64:5]!../../../node_modules/sass-loader/lib/loader.js!./styles.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./components/topbar/styles.scss\n// module id = 165\n// module chunks = 0","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".styles__topbar___BnV0U {\\n  display: flex;\\n  flex-direction: row;\\n  flex-wrap: nowrap;\\n  justify-content: space-around;\\n  align-items: center;\\n  width: 100%; }\\n\\n.styles__topbarItem___1T_T5 {\\n  padding: 10px; }\\n\\n.styles__aboutContainer___1dOhN {\\n  cursor: pointer; }\\n\\n.styles__aboutContainer___1dOhN:hover .styles__aboutInfo___2JgLz {\\n  display: inline-block; }\\n\\n.styles__aboutInfo___2JgLz {\\n  display: none;\\n  position: absolute;\\n  border: 1px solid #000;\\n  border-radius: 4px;\\n  width: 160px; }\\n\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"topbar\": \"styles__topbar___BnV0U\",\n\t\"topbarItem\": \"styles__topbarItem___1T_T5\",\n\t\"aboutContainer\": \"styles__aboutContainer___1dOhN\",\n\t\"aboutInfo\": \"styles__aboutInfo___2JgLz\"\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/css-loader?modules&importLoaders=1&localIdentName=[name]__[local]___[hash:base64:5]!../node_modules/sass-loader/lib/loader.js!./components/topbar/styles.scss\n// module id = 166\n// module chunks = 0","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Button from 'components/primitives/button';\nimport Slider from 'components/primitives/slider';\nimport savePuppetToFile from 'services/storage/serializer';\nimport styles from './styles.scss';\n\nclass ParamControl extends Component {\n  constructor(props) {\n    super(props);\n  }\n\n  onSaveClick = () => savePuppetToFile(this.props.selectedPuppet);\n\n  onScaleChange = eventValue => {\n    const value = parseInt(eventValue) / 100;\n    this.props.selectedPuppet.setScale(value);\n  };\n\n  onRotateChange = eventValue => {\n    const value = parseFloat(eventValue) / 100;\n    this.props.selectedPuppet.setRotation(value);\n  };\n\n  renderPanel() {\n    return (\n      <div className={this.props.className}>\n        <p>Params:</p>\n        <p>Scale</p>\n        <Slider\n          min={ 1 }\n          max={ 300 }\n          defaultValue={ 100 }\n          onChange={ this.onScaleChange }\n        />\n        <p>Rotate</p>\n        <Slider\n          min={ -628 }\n          max={ 628 }\n          defaultValue={ this.props.selectedPuppet.getRotation() }\n          onChange={ this.onRotateChange }\n        />\n\n        <p className={styles.actionLabel}>Actions:</p>\n        <Button\n          className={ styles.actionButton }\n          onClick={this.props.onEditSelectedPuppet}\n        >\n          Edit puppet\n        </Button>\n        <Button\n          className={ styles.actionButton }\n          onClick={this.onSaveClick}\n        >\n          Save puppet\n        </Button>\n        <Button\n          className={ styles.actionButton }\n          onClick={this.props.onDeleteSelectedPuppet}\n        >\n          Delete puppet\n        </Button>\n      </div>\n    );\n  }\n\n  render() {\n    return this.props.selectedPuppet ? this.renderPanel() : null;\n  }\n}\n\nParamControl.propTypes = {\n  selectedPuppet: PropTypes.object,\n  onDeleteSelectedPuppet: PropTypes.func.isRequired,\n  onEditSelectedPuppet: PropTypes.func.isRequired\n};\n\nexport default ParamControl;\n\n\n\n// WEBPACK FOOTER //\n// ./components/paramControl/index.js","import FileSaver from 'file-saver';\n\nfunction getImageAsDataURL(img) {\n  const canvas = document.createElement('canvas');\n  canvas.width = img.width;\n  canvas.height = img.height;\n  const context = canvas.getContext('2d');\n  canvas.getContext('2d');\n  context.drawImage(img, 0, 0, img.width, img.height, 0, 0, canvas.width, canvas.height);\n  return canvas.toDataURL();\n}\n\nfunction getJsonFromPuppet(puppet) {\n  const puppetData = {\n    verts: puppet.verts,\n    faces: puppet.faces,\n    controlPoints: puppet.controlPoints,\n    controlPointPositions: puppet.controlPointPositions,\n    backgroundRemovalData: {\n      data: [...puppet.backgroundRemovalData.data],\n      width: puppet.backgroundRemovalData.width,\n      height: puppet.backgroundRemovalData.height,\n    },\n    imageData: getImageAsDataURL(puppet.image),\n    imageNoBGData: getImageAsDataURL(puppet.imageNoBG)\n  };\n  return JSON.stringify(puppetData);\n}\n\nfunction savePuppetToFile(puppet) {\n  const puppetJsonString = getJsonFromPuppet(puppet);\n  var blob = new Blob([puppetJsonString], {type: 'application/json'});\n  FileSaver.saveAs(blob, 'testpuppet.json');\n}\n\nexport default savePuppetToFile;\n\n\n\n// WEBPACK FOOTER //\n// ./services/storage/serializer.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js?modules&importLoaders=1&localIdentName=[name]__[local]___[hash:base64:5]!../../../node_modules/sass-loader/lib/loader.js!./styles.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {\"hmr\":true}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js?modules&importLoaders=1&localIdentName=[name]__[local]___[hash:base64:5]!../../../node_modules/sass-loader/lib/loader.js!./styles.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js?modules&importLoaders=1&localIdentName=[name]__[local]___[hash:base64:5]!../../../node_modules/sass-loader/lib/loader.js!./styles.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./components/paramControl/styles.scss\n// module id = 169\n// module chunks = 0","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".styles__actionLabel___3xlX8 {\\n  margin-top: 10px; }\\n\\n.styles__actionButton___3bPCb {\\n  margin: 5px;\\n  width: 100%;\\n  height: 20px; }\\n\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"actionLabel\": \"styles__actionLabel___3xlX8\",\n\t\"actionButton\": \"styles__actionButton___3bPCb\"\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/css-loader?modules&importLoaders=1&localIdentName=[name]__[local]___[hash:base64:5]!../node_modules/sass-loader/lib/loader.js!./components/paramControl/styles.scss\n// module id = 170\n// module chunks = 0","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Button from 'components/primitives/button';\nimport dranimate from 'services/dranimate/dranimate';\nimport styles from './styles.scss';\n\nclass Recorder extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      puppetIsRecording: false,\n      gifIsRecording: false,\n    };\n    this.keyListener = window.addEventListener('keydown', this.handleKeyPress.bind(this));\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(this.keyListener);\n  }\n\n  onGifRecordToggle = () => {\n    const gifIsRecording = !this.state.gifIsRecording;\n    this.setState({ gifIsRecording });\n    dranimate.setGifIsRecording(gifIsRecording);\n  };\n\n  onPuppetRecordToggle = (event) => {\n    const puppetIsRecording = !this.state.puppetIsRecording;\n    this.setState({ puppetIsRecording });\n    dranimate.setRecording(puppetIsRecording);\n  };\n\n  handleKeyPress = event => {\n    if (event.keyCode !== 32) { return; }\n    this.onPuppetRecordToggle();\n  };\n\n  render() {\n    return (\n      <div className={this.props.className}>\n        <Button\n          className={ this.state.puppetIsRecording ? styles.recorder : styles.recorderActive }\n          onClick={this.onPuppetRecordToggle}\n        >\n          { this.state.isRecording ? 'Puppet Stop' : 'Puppet Start' }\n        </Button>\n      <Button\n        className={ this.state.gifIsRecording ? styles.recorder : styles.recorderActive }\n        onClick={this.onGifRecordToggle}\n      >\n        { this.state.isRecording ? 'GIF Stop' : 'GIF Start' }\n      </Button>\n      </div>\n    );\n  }\n}\n\nRecorder.propTypes = {};\n\nexport default Recorder;\n\n\n\n// WEBPACK FOOTER //\n// ./components/recorder/index.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js?modules&importLoaders=1&localIdentName=[name]__[local]___[hash:base64:5]!../../../node_modules/sass-loader/lib/loader.js!./styles.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {\"hmr\":true}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js?modules&importLoaders=1&localIdentName=[name]__[local]___[hash:base64:5]!../../../node_modules/sass-loader/lib/loader.js!./styles.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js?modules&importLoaders=1&localIdentName=[name]__[local]___[hash:base64:5]!../../../node_modules/sass-loader/lib/loader.js!./styles.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./components/recorder/styles.scss\n// module id = 172\n// module chunks = 0","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".styles__recorder___21JmV {\\n  background-color: #FF3571;\\n  color: #FFF;\\n  min-width: 90px; }\\n\\n.styles__recorderActive___Xi0g1 {\\n  background-color: #EEE;\\n  color: #000;\\n  min-width: 90px; }\\n\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"recorder\": \"styles__recorder___21JmV\",\n\t\"recorderActive\": \"styles__recorderActive___Xi0g1\"\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/css-loader?modules&importLoaders=1&localIdentName=[name]__[local]___[hash:base64:5]!../node_modules/sass-loader/lib/loader.js!./components/recorder/styles.scss\n// module id = 173\n// module chunks = 0","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Button from 'components/primitives/button';\nimport MaterialInput from 'components/primitives/materialInput';\nimport styles from './styles.scss';\n\nclass Profile extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      username: '',\n      password: ''\n    };\n  }\n\n  onSignIn = () => {\n    console.log(`TODO: sign in with ${this.state.username} / ${this.state.password}`);\n  };\n\n  onUsernameChange = username => this.setState({ username });\n\n  onPasswordChange = password => this.setState({ password });\n\n  render() {\n    return (\n      <div className={styles.profileScrim}>\n        <div className={styles.profileContents}>\n          <MaterialInput\n            type='text'\n            label='Username'\n            onChange={this.onUsernameChange}\n            className={ styles.inputField }\n          />\n          <MaterialInput\n            type='password'\n            label='Password'\n            onChange={this.onPasswordChange}\n            className={ styles.inputField }\n          />\n          <Button\n            onClick={ this.onSignIn }\n            className={ styles.formButton }\n          >\n            Sign In\n          </Button>\n          <Button\n            onClick={ this.props.onClose }\n            className={ styles.formButton }\n          >\n            Close\n          </Button>\n        </div>\n      </div>\n    );\n  }\n}\n\nProfile.propTypes = {\n  onClose: PropTypes.func.isRequired\n};\n\nexport default Profile;\n\n\n\n// WEBPACK FOOTER //\n// ./components/profile/index.js","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './styles.scss';\n\nclass MaterialInput extends Component {\n  constructor(props) {\n    super(props);\n  }\n\n  onChange = event => this.props.onChange(event.target.value);\n\n  render() {\n    return (\n      <div className={ `${styles.container} ${this.props.className}` }>\n        <input\n          type={ this.props.type || 'text' }\n          onChange={ this.onChange }\n          className={styles.materialInput}\n          required\n        />\n        <span className={styles.highlight}></span>\n        <span className={styles.bar}></span>\n        <label className={styles.label}>\n          { this.props.label }\n        </label>\n      </div>\n    );\n  }\n}\n\nMaterialInput.propTypes = {\n  label: PropTypes.string.isRequired,\n  type: PropTypes.string,\n  onChange: PropTypes.func.isRequired\n};\n\nexport default MaterialInput;\n\n\n\n// WEBPACK FOOTER //\n// ./components/primitives/materialInput/index.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/index.js?modules&importLoaders=1&localIdentName=[name]__[local]___[hash:base64:5]!../../../../node_modules/sass-loader/lib/loader.js!./styles.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {\"hmr\":true}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/index.js?modules&importLoaders=1&localIdentName=[name]__[local]___[hash:base64:5]!../../../../node_modules/sass-loader/lib/loader.js!./styles.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/index.js?modules&importLoaders=1&localIdentName=[name]__[local]___[hash:base64:5]!../../../../node_modules/sass-loader/lib/loader.js!./styles.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./components/primitives/materialInput/styles.scss\n// module id = 176\n// module chunks = 0","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".styles__container___2Ihfo {\\n  height: 40px;\\n  position: relative; }\\n\\n.styles__materialInput___DoXSH {\\n  font-size: 1em;\\n  display: block;\\n  width: 100%;\\n  border: none;\\n  background: none;\\n  border-bottom: 1px solid #616161;\\n  position: absolute;\\n  bottom: 0;\\n  color: #616161;\\n  outline: none;\\n  box-shadow: none; }\\n  .styles__materialInput___DoXSH:focus {\\n    outline: none; }\\n\\n.styles__label___3w9at {\\n  color: #616161;\\n  font-weight: normal;\\n  position: absolute;\\n  pointer-events: none;\\n  top: 10px;\\n  transition: 0.2s ease all; }\\n\\n/* active state */\\n.styles__materialInput___DoXSH:focus ~ .styles__label___3w9at, .styles__materialInput___DoXSH:valid ~ .styles__label___3w9at {\\n  top: 0px;\\n  font-size: 0.8em; }\\n\\n.styles__bar___1MQqe {\\n  position: absolute;\\n  bottom: 0;\\n  display: block;\\n  width: 100%; }\\n\\n.styles__bar___1MQqe:before, .styles__bar___1MQqe:after {\\n  content: '';\\n  height: 2px;\\n  width: 0;\\n  bottom: 1px;\\n  position: absolute;\\n  background: #616161;\\n  transition: 0.2s ease all; }\\n\\n.styles__bar___1MQqe:before {\\n  left: 50%; }\\n\\n.styles__bar___1MQqe:after {\\n  right: 50%; }\\n\\n/* active state */\\n.styles__materialInput___DoXSH:focus ~ .styles__bar___1MQqe:before, .styles__materialInput___DoXSH:focus ~ .styles__bar___1MQqe:after {\\n  width: 50%; }\\n\\n.styles__highlight___2dTLq {\\n  position: absolute;\\n  height: 60%;\\n  width: 100px;\\n  top: 25%;\\n  left: 0;\\n  pointer-events: none;\\n  opacity: 0.5; }\\n\\n/* active state */\\n.styles__materialInput___DoXSH:focus ~ .styles__highlight___2dTLq {\\n  animation: styles__inputHighlighter___jlqPd 0.3s ease; }\\n\\n@keyframes styles__inputHighlighter___jlqPd {\\n  from {\\n    background: #5264AE; }\\n  to {\\n    width: 0;\\n    background: transparent; } }\\n\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"container\": \"styles__container___2Ihfo\",\n\t\"materialInput\": \"styles__materialInput___DoXSH\",\n\t\"label\": \"styles__label___3w9at\",\n\t\"bar\": \"styles__bar___1MQqe\",\n\t\"highlight\": \"styles__highlight___2dTLq\",\n\t\"inputHighlighter\": \"styles__inputHighlighter___jlqPd\"\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/css-loader?modules&importLoaders=1&localIdentName=[name]__[local]___[hash:base64:5]!../node_modules/sass-loader/lib/loader.js!./components/primitives/materialInput/styles.scss\n// module id = 177\n// module chunks = 0","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js?modules&importLoaders=1&localIdentName=[name]__[local]___[hash:base64:5]!../../../node_modules/sass-loader/lib/loader.js!./styles.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {\"hmr\":true}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js?modules&importLoaders=1&localIdentName=[name]__[local]___[hash:base64:5]!../../../node_modules/sass-loader/lib/loader.js!./styles.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js?modules&importLoaders=1&localIdentName=[name]__[local]___[hash:base64:5]!../../../node_modules/sass-loader/lib/loader.js!./styles.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./components/profile/styles.scss\n// module id = 178\n// module chunks = 0","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".styles__profileScrim___2YKdP {\\n  width: 100%;\\n  height: 100%;\\n  left: 0;\\n  top: 0;\\n  position: absolute;\\n  background-color: rgba(0, 0, 0, 0.25);\\n  display: flex;\\n  justify-content: space-around;\\n  align-items: center; }\\n\\n.styles__profileContents___G2mjc {\\n  display: flex;\\n  flex-direction: column;\\n  flex-wrap: wrap;\\n  background-color: #FFF;\\n  padding: 20px 40px;\\n  border-radius: 4px;\\n  min-width: 300px; }\\n  @media (max-width: 620px) {\\n    .styles__profileContents___G2mjc {\\n      min-width: none;\\n      width: 100%;\\n      height: 100%; } }\\n\\n.styles__inputField___1KKHx {\\n  margin: 10px 0; }\\n\\n.styles__formButton___2raE_ {\\n  margin: 10px 0;\\n  height: 30px; }\\n\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"profileScrim\": \"styles__profileScrim___2YKdP\",\n\t\"profileContents\": \"styles__profileContents___G2mjc\",\n\t\"inputField\": \"styles__inputField___1KKHx\",\n\t\"formButton\": \"styles__formButton___2raE_\"\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/css-loader?modules&importLoaders=1&localIdentName=[name]__[local]___[hash:base64:5]!../node_modules/sass-loader/lib/loader.js!./components/profile/styles.scss\n// module id = 179\n// module chunks = 0","import loadPuppetFromFile from 'services/storage/deserializer';\n\nconst mimeTypeMap = {\n  image: ['image/jpeg', 'image/jpg', 'image/gif', 'image/png'],\n  puppet: ['application/json']\n};\n\nfunction loadFile(file) {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.onloadend = event => resolve(reader.result);\n    reader.onerror = error => reject(error);\n    reader.readAsDataURL(file);\n  });\n}\n\nfunction loadDranimateFile(element) {\n  const file = element.files && element.files[0]\n  if (!file) {\n    return Promise.reject(error);\n  }\n  if (file.name.includes('.json')) {\n    // TODO: why does mobile android not recognizing json mime type???\n    return loadPuppetFromFile(file);\n  }\n  const fileType = Object.keys(mimeTypeMap)\n    .find(key => mimeTypeMap[key].includes(file.type));\n  if (!fileType) {\n    return Promise.reject('Unsupported file type');\n  }\n  if (fileType === 'image') {\n    return loadFile(file);\n  }\n  return loadPuppetFromFile(file);\n}\n\nexport { loadFile, loadDranimateFile };\n\n\n\n// WEBPACK FOOTER //\n// ./services/util/file.js","import requestPuppetCreation from 'services/puppet/PuppetFactory';\nimport loadImage from 'services/util/imageLoader';\n\nfunction loadTextFile(file) {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.onloadend = event => resolve(reader.result);\n    reader.onerror = error => reject(error);\n    reader.readAsText(file);\n  });\n}\n\nfunction loadPuppetImageFiles(textFile) {\n  const puppetData = JSON.parse(textFile);\n  return Promise.all([\n    loadImage(puppetData.imageData),\n    loadImage(puppetData.imageNoBGData),\n    Promise.resolve(puppetData)\n  ]);\n}\n\n// TODO:  validate json fields\nfunction buildPuppetFromImagesAndJson(image, imageNoBG, puppetData) {\n  const backgroundRemovalData = new ImageData(\n    Uint8ClampedArray.from(puppetData.backgroundRemovalData.data),\n    puppetData.backgroundRemovalData.width,\n    puppetData.backgroundRemovalData.height\n  );\n  const puppetParams = {\n    vertices: puppetData.verts,\n    faces: puppetData.faces,\n    controlPoints: puppetData.controlPoints,\n    controlPointPositions: puppetData.controlPointPositions,\n    image,\n    imageNoBG,\n    backgroundRemovalData\n  };\n  // TODO: move this logic to caller\n  return requestPuppetCreation(puppetParams);\n}\n\nfunction loadPuppetFromFile(file) {\n  return loadTextFile(file)\n    .then(textFile => loadPuppetImageFiles(textFile))\n    .then((result) => {\n      const [image, imageNoBG, puppetData] = result;\n      return buildPuppetFromImagesAndJson(image, imageNoBG, puppetData);\n    });\n}\n\nexport default loadPuppetFromFile;\n\n\n\n// WEBPACK FOOTER //\n// ./services/storage/deserializer.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js?modules&importLoaders=1&localIdentName=[name]__[local]___[hash:base64:5]!../../../node_modules/sass-loader/lib/loader.js!./styles.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {\"hmr\":true}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js?modules&importLoaders=1&localIdentName=[name]__[local]___[hash:base64:5]!../../../node_modules/sass-loader/lib/loader.js!./styles.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js?modules&importLoaders=1&localIdentName=[name]__[local]___[hash:base64:5]!../../../node_modules/sass-loader/lib/loader.js!./styles.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./components/stage/styles.scss\n// module id = 182\n// module chunks = 0","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".styles__stage___28Zmd {\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n  width: 100%;\\n  height: 100%;\\n  overflow: hidden; }\\n\\n.styles__dranimateCanvas___Nohgj {\\n  width: 100%;\\n  height: 100%; }\\n\\n.styles__topBar___1NCGD {\\n  position: absolute;\\n  top: 0;\\n  width: 100%; }\\n\\n.styles__profileButton___1KKCW {\\n  position: absolute;\\n  top: 0;\\n  right: 0;\\n  margin: 10px; }\\n\\n.styles__fab___1zGiF {\\n  position: absolute;\\n  right: 0;\\n  bottom: 0;\\n  padding: 15px; }\\n\\n.styles__hiddenFilePicker___3PC-9 {\\n  display: none; }\\n\\n.styles__lowerLeft___9PRT8 {\\n  position: absolute;\\n  left: 0;\\n  bottom: 0;\\n  padding: 15px;\\n  border: 1px solid #000;\\n  display: flex;\\n  flex-direction: row;\\n  justify-content: flex-start; }\\n\\n.styles__paramControl___1gfev {\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n  padding: 15px;\\n  border: 1px solid #000; }\\n\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"stage\": \"styles__stage___28Zmd\",\n\t\"dranimateCanvas\": \"styles__dranimateCanvas___Nohgj\",\n\t\"topBar\": \"styles__topBar___1NCGD\",\n\t\"profileButton\": \"styles__profileButton___1KKCW\",\n\t\"fab\": \"styles__fab___1zGiF\",\n\t\"hiddenFilePicker\": \"styles__hiddenFilePicker___3PC-9\",\n\t\"lowerLeft\": \"styles__lowerLeft___9PRT8\",\n\t\"paramControl\": \"styles__paramControl___1gfev\"\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/css-loader?modules&importLoaders=1&localIdentName=[name]__[local]___[hash:base64:5]!../node_modules/sass-loader/lib/loader.js!./components/stage/styles.scss\n// module id = 183\n// module chunks = 0","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/index.js?modules&importLoaders=1&localIdentName=[name]__[local]___[hash:base64:5]!../../node_modules/sass-loader/lib/loader.js!./baseStyles.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {\"hmr\":true}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js?modules&importLoaders=1&localIdentName=[name]__[local]___[hash:base64:5]!../../node_modules/sass-loader/lib/loader.js!./baseStyles.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js?modules&importLoaders=1&localIdentName=[name]__[local]___[hash:base64:5]!../../node_modules/sass-loader/lib/loader.js!./baseStyles.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./styles/baseStyles.scss\n// module id = 184\n// module chunks = 0","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"html, body {\\n  width: 100%;\\n  height: 100%;\\n  margin: 0;\\n  padding: 0;\\n  font-family: \\\"Nunito\\\", \\\"HelveticaNeue-Light\\\", \\\"Helvetica Neue Light\\\", \\\"Helvetica Neue\\\", Helvetica, Arial, sans-serif;\\n  font-size: 16px; }\\n\\nh1 {\\n  margin: 0;\\n  padding: 0; }\\n\\np {\\n  margin: 0;\\n  padding: 0; }\\n\\nbutton {\\n  border: none;\\n  outline: none;\\n  background-color: Transparent;\\n  background-repeat: no-repeat;\\n  cursor: pointer; }\\n\\na:link {\\n  color: inherit;\\n  text-decoration: none;\\n  border-bottom: 1px solid #FFF; }\\n\\na:active {\\n  color: inherit;\\n  text-decoration: none; }\\n\\na:visited {\\n  color: inherit;\\n  text-decoration: none; }\\n\\na:hover {\\n  color: inherit;\\n  text-decoration: none; }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/css-loader?modules&importLoaders=1&localIdentName=[name]__[local]___[hash:base64:5]!../node_modules/sass-loader/lib/loader.js!./styles/baseStyles.scss\n// module id = 185\n// module chunks = 0"],"sourceRoot":""}